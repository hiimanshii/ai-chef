import{c as j,r as i,u as v,E as w,j as e,y as h,C as N,B as C,L as k}from"./index-C0Eqig3U.js";import{I as o}from"./input-Dl9dDyYd.js";import{L as m}from"./label-CpBi_1et.js";import{C as A,a as P,b as S,d as E,c as L,e as F}from"./card-XD_VQd1P.js";import{A as U,a as I,b as q}from"./alert-DGEpsjEo.js";import{C as z}from"./circle-alert-Ddu7F-eT.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=j("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),J=()=>{const[x,p]=i.useState(""),[d,g]=i.useState(""),[l,y]=i.useState(""),[n,s]=i.useState(null),{signup:b,isLoading:a,currentUser:c}=v(),u=w();i.useEffect(()=>{c&&!a&&(console.log("Signup Page: User already logged in, redirecting to /create"),u("/create",{replace:!0}))},[c,a,u]);const f=async r=>{if(r.preventDefault(),s(null),!d||!l){s("Please enter both email and password.");return}if(l.length<8){s("Password must be at least 8 characters long.");return}try{await b(d,l,x||void 0)}catch(t){console.error("Signup Page Error:",t),t instanceof Error?t.message.includes("user_already_exists")?s("An account with this email already exists. Please log in."):t.message.includes("password_short")?s("Password must be at least 8 characters long."):s(t.message):s("An unexpected error occurred during signup. Please try again.")}};return a&&!c?e.jsx("div",{className:"container flex items-center justify-center min-h-[80vh] py-8",children:e.jsx(h,{size:"lg",text:"Checking authentication..."})}):c?null:e.jsxs("div",{className:"container flex items-center justify-center min-h-[calc(100vh-150px)] py-8 animate-fade-in",children:[" ",e.jsxs(A,{className:"w-full max-w-md shadow-xl border border-gray-200 dark:border-gray-800 rounded-lg overflow-hidden",children:[" ",e.jsxs(P,{className:"space-y-2 text-center bg-gray-50 dark:bg-gray-900/50 p-6 border-b dark:border-gray-800",children:[e.jsx("div",{className:"flex justify-center mb-3",children:e.jsx(N,{className:"h-14 w-14 text-recipe-primary"})}),e.jsx(S,{className:"text-2xl font-bold tracking-tight",children:"Create Your Account"}),e.jsx(E,{children:"Join us to generate, save, and manage your AI recipes!"})]}),e.jsxs("form",{onSubmit:f,children:[e.jsxs(L,{className:"p-6 space-y-5",children:[" ",n&&e.jsxs(U,{variant:"destructive",children:[e.jsx(z,{className:"h-4 w-4"}),e.jsx(I,{children:"Signup Failed"}),e.jsx(q,{children:n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"name",children:"Name (Optional)"}),e.jsx(o,{id:"name",type:"text",placeholder:"Your Name",value:x,onChange:r=>p(r.target.value),disabled:a,className:"text-base sm:text-sm"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"email",children:"Email"}),e.jsx(o,{id:"email",type:"email",placeholder:"you@example.com",value:d,onChange:r=>g(r.target.value),required:!0,disabled:a,"aria-describedby":n?"error-message":void 0,className:"text-base sm:text-sm"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"password",children:"Password"}),e.jsx(o,{id:"password",type:"password",placeholder:"••••••••",value:l,onChange:r=>y(r.target.value),required:!0,disabled:a,"aria-describedby":n?"error-message":"password-hint",className:"text-base sm:text-sm"}),e.jsx("p",{id:"password-hint",className:"text-xs text-gray-500 dark:text-gray-400",children:"Must be at least 8 characters long."})]})]}),e.jsxs(F,{className:"flex flex-col space-y-4 p-6 pt-4",children:[" ",e.jsxs(C,{type:"submit",className:"w-full bg-recipe-primary hover:bg-recipe-secondary text-white dark:bg-recipe-accent dark:hover:bg-recipe-primary dark:text-black text-base font-semibold py-2.5 shadow-md transition-all duration-200 hover:shadow-lg disabled:opacity-60",disabled:a,size:"lg",children:[a?e.jsx(h,{size:"sm",className:"mr-2 border-t-white"}):e.jsx(D,{className:"mr-2 h-5 w-5"}),a?"Creating Account...":"Sign Up"]}),e.jsxs("div",{className:"text-center text-sm text-gray-600 dark:text-gray-400",children:["Already have an account?"," ",e.jsx(k,{to:"/login",className:"font-medium text-recipe-primary hover:underline",children:"Log in instead"})]})]})]})]})]})};export{J as default};
