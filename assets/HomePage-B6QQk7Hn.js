import{c as W,r as l,a as _t,j as s,b as Se,P as B,d as X,e as I,f as xe,g as os,h as M,i as je,k as as,B as A,C as Be,u as Mt,l as is,m as kt,n as Tt,R as cs,A as ls,o as ds,p as us,q as ps,D as ms,s as gs,t as fs,v as At,w as nt,x as hs,y as xs,L as st,z as vs}from"./index-B4YfBIjH.js";import{T as ys,L as bs}from"./textarea-C_Q8Kfq4.js";import{c as _e,R as Ot,I as Dt,T as ws,a as Cs,b as Le,d as $e,C as Ns}from"./tabs-3P62xi-a.js";import{C as Ne,c as Ee,a as Pt,b as Lt,d as Es,e as $t}from"./card-D1ML73zI.js";import{L as $}from"./label-CptcDo-L.js";import{S as Z}from"./skeleton-DPLtmhBp.js";import{I as ue}from"./input-CXl6b2_3.js";import{u as Gt,a as Is,C as Fe,h as Rs,b as Ss,R as js,F as _s}from"./Combination-CX40U9w3.js";import{R as Ms}from"./refresh-cw-520TMQi8.js";import{B as le}from"./badge-D_fxpaAb.js";import{Z as ks,U as Ts,S as As,C as Os,L as Ds,a as Ps,I as Ft}from"./zap-DixBCftj.js";import{C as Ge}from"./clock-BZrKQDEk.js";import{P as Ls,D as rt,S as $s,a as ot,b as at,c as it,d as ct,e as lt,f as dt}from"./dialog-CqrUb7Hu.js";import{S as Gs}from"./separator-BgglrdJu.js";import{A as Fs,a as Us,b as Ks}from"./alert-BwLpNu4d.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=W("BookmarkPlus",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}],["line",{x1:"12",x2:"12",y1:"7",y2:"13",key:"1cppfj"}],["line",{x1:"15",x2:"9",y1:"10",y2:"10",key:"1gty7f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=W("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=W("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=W("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=W("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=W("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=W("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=W("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);var ut;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(ut||(ut={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(pt||(pt={}));var mt;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(mt||(mt={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt=["user","model","function","system"];var ae;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(ae||(ae={}));var ie;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(ie||(ie={}));var ft;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(ft||(ft={}));var ht;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(ht||(ht={}));var pe;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(pe||(pe={}));var xt;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(xt||(xt={}));var vt;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(vt||(vt={}));var yt;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(yt||(yt={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class oe extends _{constructor(t,n){super(t),this.response=n}}class Kt extends _{constructor(t,n,r,o){super(t),this.status=n,this.statusText=r,this.errorDetails=o}}class z extends _{}class Bt extends _{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="https://generativelanguage.googleapis.com",Js="v1beta",Zs="0.24.1",Qs="genai-js";var Q;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Q||(Q={}));class er{constructor(t,n,r,o,a){this.model=t,this.task=n,this.apiKey=r,this.stream=o,this.requestOptions=a}toString(){var t,n;const r=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||Js;let a=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||Xs}/${r}/${this.model}:${this.task}`;return this.stream&&(a+="?alt=sse"),a}}function tr(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${Qs}/${Zs}`),t.join(" ")}async function nr(e){var t;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",tr(e.requestOptions)),n.append("x-goog-api-key",e.apiKey);let r=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(o){throw new z(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${o.message}`)}for(const[o,a]of r.entries()){if(o==="x-goog-api-key")throw new z(`Cannot set reserved header name ${o}`);if(o==="x-goog-api-client")throw new z(`Header name ${o} can only be set using the apiClient field`);n.append(o,a)}}return n}async function sr(e,t,n,r,o,a){const i=new er(e,t,n,r,a);return{url:i.toString(),fetchOptions:Object.assign(Object.assign({},ir(a)),{method:"POST",headers:await nr(i),body:o})}}async function ve(e,t,n,r,o,a={},i=fetch){const{url:c,fetchOptions:d}=await sr(e,t,n,r,o,a);return rr(c,d,i)}async function rr(e,t,n=fetch){let r;try{r=await n(e,t)}catch(o){or(o,e)}return r.ok||await ar(r,e),r}function or(e,t){let n=e;throw n.name==="AbortError"?(n=new Bt(`Request aborted when fetching ${t.toString()}: ${e.message}`),n.stack=e.stack):e instanceof Kt||e instanceof z||(n=new _(`Error fetching from ${t.toString()}: ${e.message}`),n.stack=e.stack),n}async function ar(e,t){let n="",r;try{const o=await e.json();n=o.error.message,o.error.details&&(n+=` ${JSON.stringify(o.error.details)}`,r=o.error.details)}catch{}throw new Kt(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${n}`,e.status,e.statusText,r)}function ir(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const n=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>n.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{n.abort()}),t.signal=n.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Ce(e.candidates[0]))throw new oe(`${V(e)}`,e);return cr(e)}else if(e.promptFeedback)throw new oe(`Text not available. ${V(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Ce(e.candidates[0]))throw new oe(`${V(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),bt(e)[0]}else if(e.promptFeedback)throw new oe(`Function call not available. ${V(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Ce(e.candidates[0]))throw new oe(`${V(e)}`,e);return bt(e)}else if(e.promptFeedback)throw new oe(`Function call not available. ${V(e)}`,e)},e}function cr(e){var t,n,r,o;const a=[];if(!((n=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||n===void 0)&&n.parts)for(const i of(o=(r=e.candidates)===null||r===void 0?void 0:r[0].content)===null||o===void 0?void 0:o.parts)i.text&&a.push(i.text),i.executableCode&&a.push("\n```"+i.executableCode.language+`
`+i.executableCode.code+"\n```\n"),i.codeExecutionResult&&a.push("\n```\n"+i.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}function bt(e){var t,n,r,o;const a=[];if(!((n=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||n===void 0)&&n.parts)for(const i of(o=(r=e.candidates)===null||r===void 0?void 0:r[0].content)===null||o===void 0?void 0:o.parts)i.functionCall&&a.push(i.functionCall);if(a.length>0)return a}const lr=[pe.RECITATION,pe.SAFETY,pe.LANGUAGE];function Ce(e){return!!e.finishReason&&lr.includes(e.finishReason)}function V(e){var t,n,r;let o="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)o+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(o+=` due to ${e.promptFeedback.blockReason}`),!((n=e.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(o+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((r=e.candidates)===null||r===void 0)&&r[0]){const a=e.candidates[0];Ce(a)&&(o+=`Candidate was blocked due to ${a.finishReason}`,a.finishMessage&&(o+=`: ${a.finishMessage}`))}return o}function me(e){return this instanceof me?(this.v=e,this):new me(e)}function dr(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,a=[];return o={},i("next"),i("throw"),i("return"),o[Symbol.asyncIterator]=function(){return this},o;function i(m){r[m]&&(o[m]=function(f){return new Promise(function(h,N){a.push([m,f,h,N])>1||c(m,f)})})}function c(m,f){try{d(r[m](f))}catch(h){u(a[0][3],h)}}function d(m){m.value instanceof me?Promise.resolve(m.value.v).then(p,g):u(a[0][2],m)}function p(m){c("next",m)}function g(m){c("throw",m)}function u(m,f){m(f),a.shift(),a.length&&c(a[0][0],a[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wt=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function ur(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=gr(t),[r,o]=n.tee();return{stream:mr(r),response:pr(o)}}async function pr(e){const t=[],n=e.getReader();for(;;){const{done:r,value:o}=await n.read();if(r)return He(fr(t));t.push(o)}}function mr(e){return dr(this,arguments,function*(){const n=e.getReader();for(;;){const{value:r,done:o}=yield me(n.read());if(o)break;yield yield me(He(r))}})}function gr(e){const t=e.getReader();return new ReadableStream({start(r){let o="";return a();function a(){return t.read().then(({value:i,done:c})=>{if(c){if(o.trim()){r.error(new _("Failed to parse stream"));return}r.close();return}o+=i;let d=o.match(wt),p;for(;d;){try{p=JSON.parse(d[1])}catch{r.error(new _(`Error parsing JSON response: "${d[1]}"`));return}r.enqueue(p),o=o.substring(d[0].length),d=o.match(wt)}return a()}).catch(i=>{let c=i;throw c.stack=i.stack,c.name==="AbortError"?c=new Bt("Request aborted when reading from the stream"):c=new _("Error reading from the stream"),c})}}})}function fr(e){const t=e[e.length-1],n={promptFeedback:t==null?void 0:t.promptFeedback};for(const r of e){if(r.candidates){let o=0;for(const a of r.candidates)if(n.candidates||(n.candidates=[]),n.candidates[o]||(n.candidates[o]={index:o}),n.candidates[o].citationMetadata=a.citationMetadata,n.candidates[o].groundingMetadata=a.groundingMetadata,n.candidates[o].finishReason=a.finishReason,n.candidates[o].finishMessage=a.finishMessage,n.candidates[o].safetyRatings=a.safetyRatings,a.content&&a.content.parts){n.candidates[o].content||(n.candidates[o].content={role:a.content.role||"user",parts:[]});const i={};for(const c of a.content.parts)c.text&&(i.text=c.text),c.functionCall&&(i.functionCall=c.functionCall),c.executableCode&&(i.executableCode=c.executableCode),c.codeExecutionResult&&(i.codeExecutionResult=c.codeExecutionResult),Object.keys(i).length===0&&(i.text=""),n.candidates[o].content.parts.push(i)}o++}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ht(e,t,n,r){const o=await ve(t,Q.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(n),r);return ur(o)}async function Yt(e,t,n,r){const a=await(await ve(t,Q.GENERATE_CONTENT,e,!1,JSON.stringify(n),r)).json();return{response:He(a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function ge(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const n of e)typeof n=="string"?t.push({text:n}):t.push(n);return hr(t)}function hr(e){const t={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,o=!1;for(const a of e)"functionResponse"in a?(n.parts.push(a),o=!0):(t.parts.push(a),r=!0);if(r&&o)throw new _("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!o)throw new _("No content is provided for sending chat message.");return r?t:n}function xr(e,t){var n;let r={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(n=t==null?void 0:t.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const o=e.generateContentRequest!=null;if(e.contents){if(o)throw new z("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=e.contents}else if(o)r=Object.assign(Object.assign({},r),e.generateContentRequest);else{const a=ge(e);r.contents=[a]}return{generateContentRequest:r}}function Ct(e){let t;return e.contents?t=e:t={contents:[ge(e)]},e.systemInstruction&&(t.systemInstruction=qt(e.systemInstruction)),t}function vr(e){return typeof e=="string"||Array.isArray(e)?{content:ge(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],yr={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function br(e){let t=!1;for(const n of e){const{role:r,parts:o}=n;if(!t&&r!=="user")throw new _(`First content should be with role 'user', got ${r}`);if(!gt.includes(r))throw new _(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(gt)}`);if(!Array.isArray(o))throw new _("Content should have 'parts' property with an array of Parts");if(o.length===0)throw new _("Each Content should have at least one part");const a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const c of o)for(const d of Nt)d in c&&(a[d]+=1);const i=yr[r];for(const c of Nt)if(!i.includes(c)&&a[c]>0)throw new _(`Content with role '${r}' can't contain '${c}' part`);t=!0}}function Et(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const r of n.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const It="SILENT_ERROR";class wr{constructor(t,n,r,o={}){this.model=n,this.params=r,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,r!=null&&r.history&&(br(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,n={}){var r,o,a,i,c,d;await this._sendPromise;const p=ge(t),g={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(c=this.params)===null||c===void 0?void 0:c.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,p]},u=Object.assign(Object.assign({},this._requestOptions),n);let m;return this._sendPromise=this._sendPromise.then(()=>Yt(this._apiKey,this.model,g,u)).then(f=>{var h;if(Et(f.response)){this._history.push(p);const N=Object.assign({parts:[],role:"model"},(h=f.response.candidates)===null||h===void 0?void 0:h[0].content);this._history.push(N)}else{const N=V(f.response);N&&console.warn(`sendMessage() was unsuccessful. ${N}. Inspect response object for details.`)}m=f}).catch(f=>{throw this._sendPromise=Promise.resolve(),f}),await this._sendPromise,m}async sendMessageStream(t,n={}){var r,o,a,i,c,d;await this._sendPromise;const p=ge(t),g={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(c=this.params)===null||c===void 0?void 0:c.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,p]},u=Object.assign(Object.assign({},this._requestOptions),n),m=Ht(this._apiKey,this.model,g,u);return this._sendPromise=this._sendPromise.then(()=>m).catch(f=>{throw new Error(It)}).then(f=>f.response).then(f=>{if(Et(f)){this._history.push(p);const h=Object.assign({},f.candidates[0].content);h.role||(h.role="model"),this._history.push(h)}else{const h=V(f);h&&console.warn(`sendMessageStream() was unsuccessful. ${h}. Inspect response object for details.`)}}).catch(f=>{f.message!==It&&console.error(f)}),m}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cr(e,t,n,r){return(await ve(t,Q.COUNT_TOKENS,e,!1,JSON.stringify(n),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nr(e,t,n,r){return(await ve(t,Q.EMBED_CONTENT,e,!1,JSON.stringify(n),r)).json()}async function Er(e,t,n,r){const o=n.requests.map(i=>Object.assign(Object.assign({},i),{model:t}));return(await ve(t,Q.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:o}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(t,n,r={}){this.apiKey=t,this._requestOptions=r,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=qt(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(t,n={}){var r;const o=Ct(t),a=Object.assign(Object.assign({},this._requestOptions),n);return Yt(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},o),a)}async generateContentStream(t,n={}){var r;const o=Ct(t),a=Object.assign(Object.assign({},this._requestOptions),n);return Ht(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},o),a)}startChat(t){var n;return new wr(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},t),this._requestOptions)}async countTokens(t,n={}){const r=xr(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),n);return Cr(this.apiKey,this.model,r,o)}async embedContent(t,n={}){const r=vr(t),o=Object.assign(Object.assign({},this._requestOptions),n);return Nr(this.apiKey,this.model,r,o)}async batchEmbedContents(t,n={}){const r=Object.assign(Object.assign({},this._requestOptions),n);return Er(this.apiKey,this.model,t,r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(t){this.apiKey=t}getGenerativeModel(t,n){if(!t.model)throw new _("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Rt(this.apiKey,t,n)}getGenerativeModelFromCachedContent(t,n,r){if(!t.name)throw new z("Cached content must contain a `name` field.");if(!t.model)throw new z("Cached content must contain a `model` field.");const o=["model","systemInstruction"];for(const i of o)if(n!=null&&n[i]&&t[i]&&(n==null?void 0:n[i])!==t[i]){if(i==="model"){const c=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,d=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(c===d)continue}throw new z(`Different value for "${i}" specified in modelParams (${n[i]}) and cachedContent (${t[i]})`)}const a=Object.assign(Object.assign({},n),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new Rt(this.apiKey,a,r)}}const ye=()=>{const e="AIzaSyBbJgPlYKoLR-H7PkbSLaWEHBZpN3O4vUM";try{const t=[{category:ae.HARM_CATEGORY_HARASSMENT,threshold:ie.BLOCK_MEDIUM_AND_ABOVE},{category:ae.HARM_CATEGORY_HATE_SPEECH,threshold:ie.BLOCK_MEDIUM_AND_ABOVE},{category:ae.HARM_CATEGORY_SEXUALLY_EXPLICIT,threshold:ie.BLOCK_MEDIUM_AND_ABOVE},{category:ae.HARM_CATEGORY_DANGEROUS_CONTENT,threshold:ie.BLOCK_MEDIUM_AND_ABOVE}];return new Ir(e)}catch(t){throw console.error("Failed to initialize GoogleGenerativeAI:",t),new Error("Failed to initialize Gemini client. Check API key format.")}},L=(e,t,n)=>{const r=e.match(t);if(!r||r.index===void 0)return null;const o=r.index+r[0].length,a=new RegExp(`^\\s*(?:${n}|$)`,"im"),i=e.substring(o),c=i.match(a),d=c&&c.index!==void 0?c.index:i.length;return i.substring(0,d).trim()},Vt=e=>{var i,c;e=e.trim()+`
`;const t={},n="Description:|Ingredients:|Instructions:|Prep Time:|Cook Time:|Total Time:|Servings:|Difficulty:|Macros:|Reasoning:|Tips:";t.title=L(e,/^(?:Title:?|Recipe Name:?)\s*/im,n)||"Untitled Recipe",t.description=L(e,/^(?:Description:?)\s*/im,n)||void 0,t.prepTime=L(e,/^(?:Prep Time:?)\s*/im,n)||void 0,t.cookTime=L(e,/^(?:Cook Time:?)\s*/im,n)||void 0,t.totalTime=L(e,/^(?:Total Time:?)\s*/im,n)||void 0,t.servings=L(e,/^(?:Servings:?)\s*/im,n)||void 0,t.difficulty=L(e,/^(?:Difficulty:?)\s*/im,n)||void 0,t.reasoning=L(e,/^(?:Reasoning:?)\s*/im,n)||void 0,t.tags=[],t.userRating=void 0,t.userNotes=void 0;const r=L(e,/^(?:Ingredients?:?)\s*/im,n);t.ingredients=r?r.split(`
`).map(d=>d.trim().replace(/^[-*]\s*/,"")).filter(Boolean):[],t.instructions=L(e,/^(?:Instructions?:?)\s*/im,n)||"";const o=L(e,/^(?:Tips?:?|Variations?:?)\s*/im,n);t.tips=o?o.split(`
`).map(d=>d.trim().replace(/^[-*]\s*/,"")).filter(Boolean):void 0;const a=L(e,/^(?:Macros?:?)\s*(?:\(per serving\))?\s*/im,n);if(a){t.macros={};const d=a.match(/(?:Calories|Energy):\s*([^\n,]+)/i),p=a.match(/Protein:\s*([^\n,]+)/i),g=a.match(/(?:Carbs?|Carbohydrates?):\s*([^\n,]+)/i),u=a.match(/Fat:\s*([^\n,]+)/i);d&&(t.macros.calories=d[1].trim()),p&&(t.macros.protein=p[1].trim()),g&&(t.macros.carbs=g[1].trim()),u&&(t.macros.fat=u[1].trim())}return console.log("--- Final Parsed Output (Enhanced) ---"),console.log("Title:",t.title),console.log("Description:",t.description),console.log("Ingredients Count:",(i=t.ingredients)==null?void 0:i.length),console.log("Instructions Length:",(c=t.instructions)==null?void 0:c.length),console.log("Prep Time:",t.prepTime),console.log("Cook Time:",t.cookTime),console.log("Total Time:",t.totalTime),console.log("Servings:",t.servings),console.log("Difficulty:",t.difficulty),console.log("Macros:",t.macros),console.log("Reasoning:",t.reasoning),console.log("Tips:",t.tips),console.log("--------------------------------------"),t},Rr=async e=>{var t,n,r;try{if(!e.title)return console.error("Cannot generate image: Recipe title is missing"),null;const o=ye();try{const a=o.getGenerativeModel({model:"gemini-2.0-flash-exp-image-generation"}),i=e.ingredients.slice(0,5).join(", "),c=`Generate a high-quality, appetizing image of ${e.title}. This dish contains ingredients like ${i}. ${e.description||""} Make the image look like a professional food photography shot with good lighting and appealing presentation.`,d=await a.generateContent(c);if(d.response&&d.response.candidates&&((n=(t=d.response.candidates[0])==null?void 0:t.content)!=null&&n.parts)){for(const p of d.response.candidates[0].content.parts)if((r=p.inlineData)!=null&&r.data)return p.inlineData.data}return console.error("Image generation completed but no image was returned"),null}catch(a){return console.error("Image generation with gemini-2.0-flash-exp-image-generation failed:",a),console.log("Falling back to default recipe image"),null}}catch(o){return console.error("Error in generateRecipeImage function:",o),null}},Sr=async(e,t,n,r,o,a,i,c,d)=>{var p;console.log("Generating recipe with inputs:",{ingredients:e,dietaryPreferences:t,cuisineStyle:n,mealType:r,cookingTime:o,skillLevel:a,servings:i,equipment:c,nutritionalGoals:d});try{const u=ye().getGenerativeModel({model:"gemini-1.5-flash"}),m=t.length>0?t.join(", "):"None",f=d?`
- Nutritional Goals: ${d} (Please ensure recipe meets these requirements)`:"",h=`
Generate a detailed recipe based *strictly* on the following details. Adhere precisely to the output format requested, including all specified headings even if the information is estimated or unavailable (use "N/A" or a reasonable estimate).

**Recipe Requirements:**
- Meal Type: ${r||"Any"}
- Cuisine Style: ${n||"Any"}
- Dietary Restrictions: ${m}
- Key Ingredients Provided: ${e}${f}
${o?`- Target Cooking Time: ${o}`:""}
${a?`- Target Skill Level: ${a}`:""}
${i?`- Desired Number of Servings: ${i}`:""}
${c?`- Specific Equipment Available: ${c}`:""}

**Output Format Required (Use these exact headings followed by a colon and content):**

Title:
[Insert a creative and fitting recipe title here]

Description:
[Provide a brief, appealing description of the dish (1-2 sentences).]

Prep Time:
[Estimate the preparation time, e.g., "15 minutes"]

Cook Time:
[Estimate the cooking time, e.g., "30 minutes"]

Total Time:
[Estimate the total time (prep + cook), e.g., "45 minutes"]

Servings:
[State the number of servings this recipe makes, e.g., "4 servings"]

Difficulty:
[Estimate the difficulty level: Easy, Medium, or Hard]

Ingredients:
[List all ingredients needed, one per line, with precise quantities if possible. Start each line with '*' or '-'.]

Instructions:
[Provide clear, step-by-step cooking instructions, numbered (1., 2., 3.).]

Macros:
[Provide estimated macronutrients per serving. Use this format:
Calories: [value] kcal
Protein: [value]g
Carbs: [value]g
Fat: [value]g
If estimation is not possible, state "Estimation unavailable".]

Reasoning:
[Briefly explain why this recipe is a good fit based on the provided ingredients and preferences (1-2 sentences).]

Tips:
[Optional: Provide 1-3 helpful cooking tips, variations, or serving suggestions. Start each tip with '*' or '-'. If none, state "None".]
`;console.log("--- Sending Enhanced Prompt to Gemini ---"),console.log("--------------------------------------");const N=await u.generateContent(h),E=(p=N.response)==null?void 0:p.text();if(typeof E!="string")throw console.error("Invalid response format from Gemini API:",N.response),new Error("Received an invalid response format from the AI.");console.log("--- Raw Gemini Response (Enhanced) ---"),console.log(E),console.log("-----------------------------------");const j=Vt(E);try{const b=await Rr(j);b&&(j.imageUrl=`data:image/jpeg;base64,${b}`)}catch(b){console.error("Failed to generate recipe image:",b)}return j}catch(g){throw console.error("Error in generateRecipe function:",g),g instanceof Error&&g.message.includes("API key")?new Error("Invalid or missing Gemini API key."):new Error(`Failed to generate recipe: ${g instanceof Error?g.message:"Unknown AI error"}`)}},jr=async(e,t)=>{var n,r;try{if(!e)throw new Error("No recipe provided for scaling");const a=ye().getGenerativeModel({model:"gemini-1.5-flash"}),i=(n=e.servings)==null?void 0:n.match(/(\d+)/),c=i?parseInt(i[1],10):4,d=e.ingredients.join(`
`),p=`
Please scale the following recipe from ${c} servings to ${t} servings.
Scale ONLY the ingredient quantities proportionally and keep everything else the same.

ORIGINAL RECIPE:
Title: ${e.title}
Servings: ${e.servings||`${c} servings`}

Ingredients:
${d}

YOUR TASK:
1. Provide ONLY the scaled ingredients list with the exact same format
2. Adjust ONLY the amounts/quantities, not the ingredients themselves
3. For each ingredient line, scale the numeric quantities by multiplying by (${t}/${c})
4. Round to reasonable cooking measurements (e.g., don't say 1.33 tablespoons, say 1 1/3 tablespoons)
5. Format your response as a simple list, exactly like the original but with adjusted quantities
    `,u=(r=(await a.generateContent(p)).response)==null?void 0:r.text();if(!u)throw new Error("Failed to get scaled ingredients from AI");const m=u.split(`
`).map(h=>h.trim()).filter(h=>h.length>0).map(h=>h.replace(/^[-*•]\s*/,""));return{...e,ingredients:m,servings:`${t} servings`}}catch(o){throw console.error("Error scaling recipe:",o),new Error(`Failed to scale recipe: ${o instanceof Error?o.message:"Unknown error"}`)}},_r=async(e,t)=>{var n;try{const o=ye().getGenerativeModel({model:"gemini-1.5-flash"});let a=`
Suggest 3-5 practical substitutions for "${e}" in cooking. 

For each substitution:
1. Name the alternative ingredient
2. Provide a brief note on how it affects the dish (taste, texture, etc.)
3. Include the appropriate quantity conversion if applicable

Format each substitution as:
{
  "substitution": "Alternative ingredient with quantity if needed",
  "notes": "Brief note about taste/texture changes and usage tips"
}
`;t&&(a+=`

This is for a ${t.title} recipe. Consider the compatibility with these other ingredients: ${t.ingredients.slice(0,5).join(", ")}`);const c=(n=(await o.generateContent(a)).response)==null?void 0:n.text();if(!c)throw new Error("Empty response from AI for ingredient substitutions");const d=c.match(/\[\s*\{.*\}\s*\]/s);let p;d?p=d[0]:(p=c.replace(/```json/g,"").replace(/```/g,"").trim(),p.startsWith("[")||(p="["+p),p.endsWith("]")||(p=p+"]"));try{return JSON.parse(p)}catch(g){throw console.error("Failed to parse substitutions JSON:",g),console.log("Raw response:",c),new Error("Failed to parse ingredient substitutions")}}catch(r){throw console.error("Error generating ingredient substitutions:",r),new Error(`Failed to get substitutions: ${r instanceof Error?r.message:"Unknown error"}`)}},Mr=async(e,t)=>{var n;console.log("Generating chat response for:",e,"with recipe context:",!!t);try{const o=ye().getGenerativeModel({model:"gemini-1.5-flash"});let a="";const i=`
**Output Format for NEW/MODIFIED Recipes (Use these exact headings):**
[Optional brief acknowledgement of the request]

Title:
[New recipe title]

Description:
[Brief description]

Prep Time:
[Estimated prep time]

Cook Time:
[Estimated cook time]

Total Time:
[Estimated total time]

Servings:
[Number of servings]

Difficulty:
[Easy, Medium, or Hard]

Ingredients:
[List all ingredients, one per line, starting with '*' or '-'.]

Instructions:
[Full step-by-step instructions, numbered.]

Macros:
[Estimated macros per serving: Calories, Protein, Carbs, Fat]

Reasoning:
[Brief explanation for the modification/choice]

Tips:
[Optional tips/variations]
`;if(t){const m=t.ingredients.join(`
`);a=`
You are an AI chef assistant helping a user with a specific recipe.

**Current Recipe Context:**
Title: ${t.title}
Ingredients:
${m}
Instructions:
${t.instructions}
${t.prepTime?`Prep Time: ${t.prepTime}`:""}
${t.cookTime?`Cook Time: ${t.cookTime}`:""}

**User's Request:** "${e}"

**Your Task:**
1.  Analyze the user's request regarding the current recipe.
2.  If asking for a **modification**, provide a brief acknowledgement AND generate a **completely new, modified recipe** with all details (Title, Description, Times, Servings, Difficulty, Ingredients, Instructions, Macros, Reasoning, Tips) using the format below.
3.  If asking a **general question** about the current recipe, provide a helpful, concise answer *without* generating a new recipe.
4.  If asking for something unrelated, respond appropriately.

${i}

**Output Format for General Questions:**
[Provide a direct, helpful answer.]
`}else a=`
You are an AI chef assistant.

**User's Request:** "${e}"

**Your Task:**
1.  Analyze the request.
2.  If asking for a **recipe**, generate a complete recipe with all details (Title, Description, Times, Servings, Difficulty, Ingredients, Instructions, Macros, Reasoning, Tips) using the format below.
3.  If asking a **general cooking question**, provide a helpful, concise answer.
4.  If conversational, respond naturally.

${i}

**Output Format for General Questions:**
[Provide a direct, helpful answer.]
`;console.log("--- Sending Enhanced Chat Prompt to Gemini ---"),console.log("-------------------------------------------");const c=await o.generateContent(a),d=(n=c.response)==null?void 0:n.text();if(typeof d!="string")throw console.error("Invalid response format from Gemini API:",c.response),new Error("Received an invalid response format from the AI.");console.log("--- Raw Gemini Chat Response (Enhanced) ---"),console.log(d),console.log("----------------------------------------");const p=/^\s*Title:/im.test(d),g=/^\s*Ingredients:/im.test(d),u=/^\s*Instructions:/im.test(d);if(p&&g&&u){const m=Vt(d),f=d.match(/^([\s\S]*?)(?=^\s*Title:)/im),h=f?f[1].trim():t?"Okay, I've modified the recipe for you:":"Here is the recipe I generated:";return console.log("Chat response parsed as: Recipe included (Enhanced)"),{message:h,recipe:m}}else return console.log("Chat response parsed as: General message"),{message:d.trim(),recipe:null}}catch(r){throw console.error("Error in generateChatResponse function:",r),new Error(`Failed to get chat response: ${r instanceof Error?r.message:"Unknown AI error"}`)}};var Ye="Radio",[kr,zt]=Se(Ye),[Tr,Ar]=kr(Ye),Wt=l.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:o=!1,required:a,disabled:i,value:c="on",onCheck:d,form:p,...g}=e,[u,m]=l.useState(null),f=X(t,E=>m(E)),h=l.useRef(!1),N=u?p||!!u.closest("form"):!0;return s.jsxs(Tr,{scope:n,checked:o,disabled:i,children:[s.jsx(B.button,{type:"button",role:"radio","aria-checked":o,"data-state":Qt(o),"data-disabled":i?"":void 0,disabled:i,value:c,...g,ref:f,onClick:I(e.onClick,E=>{o||d==null||d(),N&&(h.current=E.isPropagationStopped(),h.current||E.stopPropagation())})}),N&&s.jsx(Zt,{control:u,bubbles:!h.current,name:r,value:c,checked:o,required:a,disabled:i,form:p,style:{transform:"translateX(-100%)"}})]})});Wt.displayName=Ye;var Xt="RadioIndicator",Jt=l.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...o}=e,a=Ar(Xt,n);return s.jsx(xe,{present:r||a.checked,children:s.jsx(B.span,{"data-state":Qt(a.checked),"data-disabled":a.disabled?"":void 0,...o,ref:t})})});Jt.displayName=Xt;var Or="RadioBubbleInput",Zt=l.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...o},a)=>{const i=l.useRef(null),c=X(i,a),d=Is(n),p=os(t);return l.useEffect(()=>{const g=i.current;if(!g)return;const u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(d!==n&&f){const h=new Event("click",{bubbles:r});f.call(g,n),g.dispatchEvent(h)}},[d,n,r]),s.jsx(B.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:c,style:{...o.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Zt.displayName=Or;function Qt(e){return e?"checked":"unchecked"}var Dr=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Me="RadioGroup",[Pr,ja]=Se(Me,[_e,zt]),en=_e(),tn=zt(),[Lr,$r]=Pr(Me),nn=l.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:o,value:a,required:i=!1,disabled:c=!1,orientation:d,dir:p,loop:g=!0,onValueChange:u,...m}=e,f=en(n),h=Gt(p),[N,E]=_t({prop:a,defaultProp:o??null,onChange:u,caller:Me});return s.jsx(Lr,{scope:n,name:r,required:i,disabled:c,value:N,onValueChange:E,children:s.jsx(Ot,{asChild:!0,...f,orientation:d,dir:h,loop:g,children:s.jsx(B.div,{role:"radiogroup","aria-required":i,"aria-orientation":d,"data-disabled":c?"":void 0,dir:h,...m,ref:t})})})});nn.displayName=Me;var sn="RadioGroupItem",rn=l.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...o}=e,a=$r(sn,n),i=a.disabled||r,c=en(n),d=tn(n),p=l.useRef(null),g=X(t,p),u=a.value===o.value,m=l.useRef(!1);return l.useEffect(()=>{const f=N=>{Dr.includes(N.key)&&(m.current=!0)},h=()=>m.current=!1;return document.addEventListener("keydown",f),document.addEventListener("keyup",h),()=>{document.removeEventListener("keydown",f),document.removeEventListener("keyup",h)}},[]),s.jsx(Dt,{asChild:!0,...c,focusable:!i,active:u,children:s.jsx(Wt,{disabled:i,required:a.required,checked:u,...d,...o,name:a.name,ref:g,onCheck:()=>a.onValueChange(o.value),onKeyDown:I(f=>{f.key==="Enter"&&f.preventDefault()}),onFocus:I(o.onFocus,()=>{var f;m.current&&((f=p.current)==null||f.click())})})})});rn.displayName=sn;var Gr="RadioGroupIndicator",on=l.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,o=tn(n);return s.jsx(Jt,{...o,...r,ref:t})});on.displayName=Gr;var an=nn,cn=rn,Fr=on;const ln=l.forwardRef(({className:e,...t},n)=>s.jsx(an,{className:M("grid gap-2",e),...t,ref:n}));ln.displayName=an.displayName;const dn=l.forwardRef(({className:e,...t},n)=>s.jsx(cn,{ref:n,className:M("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(Fr,{className:"flex items-center justify-center",children:s.jsx(Ut,{className:"h-2.5 w-2.5 fill-current text-current"})})}));dn.displayName=cn.displayName;const Ur=[{id:"vegan",label:"Vegan"},{id:"vegetarian",label:"Vegetarian"},{id:"gluten-free",label:"Gluten-Free"},{id:"dairy-free",label:"Dairy-Free"},{id:"keto",label:"Keto"},{id:"paleo",label:"Paleo"},{id:"low-carb",label:"Low-Carb"}],Kr=["Breakfast","Lunch","Dinner","Dessert","Snack","Appetizer","Soup","Salad","Main Course","Side Dish"],Br=["Italian","Mexican","Chinese","Indian","Japanese","Thai","French","Mediterranean","American","Middle Eastern","Korean","Vietnamese","Greek","Spanish","Any"],Hr=["15 minutes or less","30 minutes or less","1 hour or less","More than 1 hour","Any"],Yr=["Beginner","Intermediate","Advanced","Any"],St=[{id:"highProtein",label:"High Protein"},{id:"lowCalorie",label:"Low Calorie (<500 cal)"},{id:"lowCarb",label:"Low Carb"},{id:"highFiber",label:"High Fiber"},{id:"lowSodium",label:"Low Sodium"},{id:"custom",label:"Custom Goal"}],qr=({onRecipeGenerated:e,isGenerating:t,setIsGenerating:n})=>{const[r,o]=l.useState(""),[a,i]=l.useState([]),[c,d]=l.useState(""),[p,g]=l.useState(""),[u,m]=l.useState(""),[f,h]=l.useState(""),[N,E]=l.useState(null),[j,b]=l.useState("basic"),[y,O]=l.useState(!0),[F,J]=l.useState(""),[T,ne]=l.useState(""),[U,H]=l.useState("4"),{toast:se}=je();l.useEffect(()=>{let x=!1;as().then(C=>{if(C&&(C.dietaryPreferences&&C.dietaryPreferences.length>0&&i(C.dietaryPreferences),C.cuisinePreferences&&C.cuisinePreferences.length>0&&d(C.cuisinePreferences[0]),C.skillLevel&&h(C.skillLevel),C.defaultServings!==void 0&&C.defaultServings>0&&H(C.defaultServings.toString()),C.savedIngredients&&C.savedIngredients.length>0&&(o(C.savedIngredients.join(", ")),x=!0,console.log("Loaded ingredients from user profile:",C.savedIngredients))),!x){const v=localStorage.getItem("savedIngredients");if(v)try{const S=JSON.parse(v);Array.isArray(S)&&S.length>0&&(o(S.join(", ")),localStorage.removeItem("savedIngredients"),console.log("Loaded ingredients from localStorage (fallback):",S),se({title:"Ingredients Loaded",description:`${S.length} ingredients loaded from your previous entry.`}))}catch(S){console.error("Error parsing saved ingredients from localStorage:",S),localStorage.removeItem("savedIngredients")}}}).catch(C=>{console.error("Error loading user profile:",C)}).finally(()=>{O(!1)})},[se]);const w=x=>{i(C=>C.includes(x)?C.filter(v=>v!==x):[...C,x])},D=()=>{o("")},R=x=>{J(x),x!=="custom"&&ne("")},P=()=>{if(F==="custom"&&T)return T;if(F&&F!=="custom"){const x=St.find(C=>C.id===F);return x?x.label:""}return""},Oe=async x=>{if(x.preventDefault(),!r.trim()){E("Please enter at least some ingredients");return}E(null),n(!0);try{const C=await Sr(r,a,c,p,u,f,`${U} servings`,void 0,P());e(C)}catch(C){console.error("Error generating recipe:",C),E("Failed to generate recipe. Please try again later.")}finally{n(!1)}};return y?s.jsx(Ne,{className:"w-full max-w-2xl mx-auto shadow-md border-recipe-primary/20",children:s.jsxs(Ee,{className:"pt-6 space-y-4",children:[s.jsx(Z,{className:"h-8 w-[150px] mb-2"}),s.jsx(Z,{className:"h-[100px] w-full"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx(Z,{className:"h-5 w-full"}),s.jsx(Z,{className:"h-5 w-full"}),s.jsx(Z,{className:"h-5 w-full"}),s.jsx(Z,{className:"h-5 w-full"})]}),s.jsx(Z,{className:"h-10 w-full"})]})}):s.jsx(Ne,{className:"w-full max-w-2xl mx-auto shadow-md border-recipe-primary/20",children:s.jsx(Ee,{className:"pt-6",children:s.jsxs("form",{onSubmit:Oe,className:"space-y-4",children:[s.jsxs(ws,{value:j,onValueChange:b,className:"w-full",children:[s.jsxs(Cs,{className:"grid grid-cols-3 mb-4",children:[s.jsx(Le,{value:"basic",children:"Basic"}),s.jsx(Le,{value:"nutrition",children:"Nutrition"}),s.jsx(Le,{value:"advanced",children:"Advanced"})]}),s.jsxs($e,{value:"basic",className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx($,{htmlFor:"ingredients",className:"text-lg font-medium",children:"Ingredients"}),r&&s.jsxs(A,{type:"button",variant:"ghost",size:"sm",onClick:D,className:"h-8 px-2 text-gray-500",children:[s.jsx(Ms,{className:"h-3.5 w-3.5 mr-1"}),"Clear"]})]}),s.jsx(ys,{id:"ingredients",placeholder:"Enter the ingredients you have (e.g., chicken, rice, tomatoes, etc.)",value:r,onChange:x=>o(x.target.value),className:"min-h-[100px]",required:!0}),s.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500",children:[s.jsx("span",{children:"Separate with commas or new lines"}),s.jsx(A,{type:"button",variant:"outline",size:"sm",onClick:()=>window.location.href="/ingredients",className:"h-8 text-xs",children:"Use Speech Input"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx($,{className:"text-lg font-medium",children:"Dietary Preferences"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:Ur.map(x=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ns,{id:x.id,checked:a.includes(x.id),onCheckedChange:()=>w(x.id)}),s.jsx("label",{htmlFor:x.id,className:"text-sm",children:x.label})]},x.id))})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx($,{htmlFor:"cuisine",className:"text-lg font-medium",children:"Cuisine Style"}),s.jsxs("select",{id:"cuisine",value:c,onChange:x=>d(x.target.value),className:"w-full border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 rounded-md shadow-sm p-2",children:[s.jsx("option",{value:"",children:"Select cuisine (optional)"}),Br.map(x=>s.jsx("option",{value:x,children:x},x))]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx($,{htmlFor:"mealType",className:"text-lg font-medium",children:"Meal Type"}),s.jsxs("select",{id:"mealType",value:p,onChange:x=>g(x.target.value),className:"w-full border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 rounded-md shadow-sm p-2",children:[s.jsx("option",{value:"",children:"Select meal type (optional)"}),Kr.map(x=>s.jsx("option",{value:x,children:x},x))]})]})]})]}),s.jsxs($e,{value:"nutrition",className:"space-y-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx($,{className:"text-lg font-medium",children:"Nutritional Goals"}),s.jsx(ln,{value:F,onValueChange:R,className:"space-y-2",children:St.map(x=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(dn,{value:x.id,id:`nutrition-${x.id}`}),s.jsx($,{htmlFor:`nutrition-${x.id}`,className:"text-sm font-normal",children:x.label})]},x.id))}),F==="custom"&&s.jsxs("div",{className:"space-y-2 pt-2",children:[s.jsx($,{htmlFor:"customNutritional",className:"text-sm",children:"Custom Nutritional Goal"}),s.jsx(ue,{id:"customNutritional",placeholder:"e.g., Under 30g of carbs per serving",value:T,onChange:x=>ne(x.target.value)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx($,{htmlFor:"servings",className:"text-lg font-medium",children:"Number of Servings"}),s.jsx(ue,{id:"servings",type:"number",min:"1",max:"20",value:U,onChange:x=>H(x.target.value),className:"w-full"})]})]}),s.jsx($e,{value:"advanced",className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx($,{htmlFor:"cookingTime",className:"text-lg font-medium",children:"Cooking Time"}),s.jsxs("select",{id:"cookingTime",value:u,onChange:x=>m(x.target.value),className:"w-full border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 rounded-md shadow-sm p-2",children:[s.jsx("option",{value:"",children:"Select cooking time (optional)"}),Hr.map(x=>s.jsx("option",{value:x,children:x},x))]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx($,{htmlFor:"skillLevel",className:"text-lg font-medium",children:"Skill Level"}),s.jsxs("select",{id:"skillLevel",value:f,onChange:x=>h(x.target.value),className:"w-full border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 rounded-md shadow-sm p-2",children:[s.jsx("option",{value:"",children:"Select skill level (optional)"}),Yr.map(x=>s.jsx("option",{value:x,children:x},x))]})]})]})})]}),N&&s.jsx("div",{className:"text-red-500 text-sm",children:N}),s.jsx(A,{type:"submit",className:"w-full bg-recipe-primary hover:bg-recipe-secondary disabled:bg-gray-300",disabled:t||!r.trim(),children:t?s.jsxs(s.Fragment,{children:[s.jsx(bs,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating Recipe..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Be,{className:"mr-2 h-5 w-5"}),"Generate Recipe"]})})]})})})},Vr=({recipe:e,onSave:t,isSaving:n})=>{const{currentUser:r}=Mt(),[o,a]=l.useState(new Set),[i,c]=l.useState(new Set),{toast:d}=je(),[p,g]=l.useState(!1),u=b=>b?b.split(/\n+/).map(y=>y.trim().replace(/^[\d.*-]+\s*/,"")).filter(y=>y.length>0):[],m=b=>{const y=new Set(o);y.has(b)?y.delete(b):y.add(b),a(y)},f=b=>{const y=new Set(i);y.has(b)?y.delete(b):y.add(b),c(y)},h=()=>{const b=window.open("","_blank");if(!b){d({title:"Print Error",description:"Unable to open print window. Please check your browser settings.",variant:"destructive"});return}const y=`
      <html>
      <head>
        <title>${e.title||"Recipe"}</title>
        <style>
          @media print {
            body { 
              font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
              line-height: 1.6; 
              margin: 20px; /* Add margins for printing */
              font-size: 11pt; /* Slightly smaller for print */
            }
            h1 { 
              font-size: 18pt; 
              color: #111827; /* Darker color for print */
              border-bottom: 1px solid #e5e7eb; 
              padding-bottom: 8px; 
              margin-bottom: 16px;
            }
            h2 { 
              font-size: 14pt; 
              color: #374151; 
              margin-top: 24px; 
              margin-bottom: 12px;
              border-bottom: 1px dashed #d1d5db;
              padding-bottom: 4px;
            }
            .description { 
              font-style: italic; 
              color: #4b5563; 
              margin-bottom: 20px; 
              font-size: 11pt;
            }
            .meta { 
              display: flex; 
              flex-wrap: wrap; /* Allow wrapping */
              gap: 12px; 
              margin-bottom: 20px; 
              padding: 10px;
              background-color: #f9fafb; /* Light background for meta */
              border-radius: 4px;
            }
            .meta-item { 
              background: #e5e7eb; 
              padding: 4px 8px; 
              border-radius: 4px; 
              font-size: 10pt; 
              color: #374151;
            }
            ul, ol { 
              padding-left: 20px; 
              margin-bottom: 16px;
            }
            li { 
              margin-bottom: 6px; 
              line-height: 1.5;
            }
            .instructions li { 
              margin-bottom: 10px; 
            }
            .macros { 
              display: grid; 
              grid-template-columns: repeat(2, 1fr); 
              gap: 6px 12px; /* Row and column gap */
              margin-top: 10px; 
              font-size: 10pt;
              padding: 10px;
              border: 1px solid #e5e7eb;
              border-radius: 4px;
            }
            .macros div { padding: 2px 0; }
            .macros span { font-weight: 600; color: #4b5563; } /* Style macro labels */
            .tip { 
              background: #fefce8; /* Lighter yellow */
              padding: 10px 14px; 
              border-left: 3px solid #facc15; /* Yellow border */
              margin-bottom: 10px; 
              font-size: 10pt;
              color: #713f12; /* Darker text for yellow bg */
            }
            .reasoning {
              background: #f0f9ff; /* Light blue */
              padding: 10px 14px;
              border-left: 3px solid #38bdf8; /* Blue border */
              margin-top: 16px;
              font-style: italic;
              color: #075985; /* Darker blue text */
              font-size: 10pt;
            }
            .no-print { 
              display: none; 
            }
          }
          /* Non-print styles (optional, mostly for testing in browser) */
          body { font-family: sans-serif; line-height: 1.6; max-width: 800px; margin: 20px auto; }
          h1 { color: #333; border-bottom: 1px solid #ddd; padding-bottom: 10px; }
          h2 { color: #555; margin-top: 20px; }
          .description { font-style: italic; color: #666; margin-bottom: 20px; }
          .meta { display: flex; gap: 15px; margin-bottom: 20px; background: #f9fafb; padding: 10px; border-radius: 4px; }
          .meta-item { background: #e5e7eb; padding: 5px 10px; border-radius: 4px; font-size: 14px; }
          ul { padding-left: 20px; }
          li { margin-bottom: 8px; }
          .instructions li { margin-bottom: 12px; }
          .macros { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; margin-top: 15px; border: 1px solid #e5e7eb; padding: 10px; border-radius: 4px; }
          .macros span { font-weight: 600; }
          .tip { background: #fffde7; padding: 8px 12px; border-left: 4px solid #ffc107; margin-bottom: 8px; }
          .reasoning { background: #f0f9ff; padding: 10px 14px; border-left: 3px solid #38bdf8; margin-top: 16px; font-style: italic; }
        </style>
      </head>
      <body>
        <h1>${e.title||"Untitled Recipe"}</h1>
        ${e.description?`<p class="description">${e.description}</p>`:""}
        
        <div class="meta">
          ${e.difficulty?`<span class="meta-item">Difficulty: ${e.difficulty}</span>`:""}
          ${e.servings?`<span class="meta-item">Servings: ${e.servings}</span>`:""}
          ${e.totalTime?`<span class="meta-item">Time: ${e.totalTime}</span>`:""}
          ${!e.totalTime&&e.prepTime?`<span class="meta-item">Prep: ${e.prepTime}</span>`:""}
          ${!e.totalTime&&e.cookTime?`<span class="meta-item">Cook: ${e.cookTime}</span>`:""}
        </div>
        
        <h2>Ingredients</h2>
        <ul>
          ${e.ingredients&&e.ingredients.map(O=>`<li>${O}</li>`).join("")}
        </ul>
        
        <h2>Instructions</h2>
        <ol class="instructions">
          ${u(e.instructions).map(O=>`<li>${O}</li>`).join("")}
        </ol>
        
        ${e.macros?`
          <h2>Nutrition Information (per serving)</h2>
          <div class="macros">
            ${e.macros.calories?`<div><span>Calories:</span> ${e.macros.calories}</div>`:""}
            ${e.macros.protein?`<div><span>Protein:</span> ${e.macros.protein}</div>`:""}
            ${e.macros.carbs?`<div><span>Carbs:</span> ${e.macros.carbs}</div>`:""}
            ${e.macros.fat?`<div><span>Fat:</span> ${e.macros.fat}</div>`:""}
          </div>
        `:""}
        
        ${e.tips&&e.tips.length>0?`
          <h2>Tips & Variations</h2>
          ${e.tips.map(O=>`<div class="tip">${O}</div>`).join("")}
        `:""}
        
        ${e.reasoning?`
          <h2>Chef's Notes</h2>
          <p class="reasoning">${e.reasoning}</p>
        `:""}
        
        <div class="no-print" style="margin-top: 30px; text-align: center;">
          <p>Printing recipe...</p> 
        </div>
      </body>
      </html>
    `;b.document.open(),b.document.write(y),b.document.close(),setTimeout(()=>{b.focus(),b.print()},500)},N=()=>{g(!p),d(p?{title:"Recipe View Mode",description:"Check steps as you complete them.",duration:3e3}:{title:"Shopping List Mode",description:"Check items you already have. Unchecked items are needed.",duration:4e3})},E=u(e.instructions),j=e.tips||[];return s.jsxs(Ne,{className:M("w-full max-w-4xl mx-auto shadow-lg border border-gray-200 dark:border-gray-700/50","recipe-container bg-white dark:bg-gray-900 rounded-xl overflow-hidden"),children:[s.jsxs(Pt,{className:"bg-gray-50 dark:bg-gray-800/30 p-6 border-b dark:border-gray-700/50",children:[s.jsxs("div",{className:"flex justify-between items-start gap-4",children:[s.jsxs("div",{children:[s.jsx(Lt,{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-gray-100 mb-1 leading-tight",children:e.title||"Untitled Recipe"}),e.description&&s.jsx(Es,{className:"text-base text-gray-600 dark:text-gray-300 mt-1",children:e.description})]}),s.jsx(Be,{className:"h-8 w-8 text-recipe-primary dark:text-recipe-accent flex-shrink-0 mt-1 opacity-80"})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 pt-4",children:[e.difficulty&&s.jsxs(le,{variant:"outline",className:"border-yellow-400/50 bg-yellow-50/50 text-yellow-800 dark:border-yellow-600/40 dark:bg-yellow-900/20 dark:text-yellow-300",children:[s.jsx(ks,{size:14,className:"mr-1.5"}),e.difficulty]}),e.servings&&s.jsxs(le,{variant:"outline",className:"border-blue-400/50 bg-blue-50/50 text-blue-800 dark:border-blue-600/40 dark:bg-blue-900/20 dark:text-blue-300",children:[s.jsx(Ts,{size:14,className:"mr-1.5"}),e.servings]}),e.totalTime&&s.jsxs(le,{variant:"outline",className:"border-green-400/50 bg-green-50/50 text-green-800 dark:border-green-600/40 dark:bg-green-900/20 dark:text-green-300",children:[s.jsx(Ge,{size:14,className:"mr-1.5"}),e.totalTime]}),!e.totalTime&&e.prepTime&&s.jsxs(le,{variant:"outline",className:"border-green-400/50 bg-green-50/50 text-green-800 dark:border-green-600/40 dark:bg-green-900/20 dark:text-green-300",children:[s.jsx(Ge,{size:14,className:"mr-1.5"}),"Prep: ",e.prepTime]}),!e.totalTime&&e.cookTime&&s.jsxs(le,{variant:"outline",className:"border-green-400/50 bg-green-50/50 text-green-800 dark:border-green-600/40 dark:bg-green-900/20 dark:text-green-300",children:[s.jsx(Ge,{size:14,className:"mr-1.5"}),"Cook: ",e.cookTime]})]})]}),s.jsxs(Ee,{className:"p-6 grid grid-cols-1 lg:grid-cols-3 gap-x-8 gap-y-6",children:[s.jsxs("div",{className:"lg:col-span-1 space-y-4 lg:border-r lg:pr-8 border-gray-200 dark:border-gray-700/50",children:[s.jsxs("div",{className:"flex justify-between items-center sticky top-0 bg-white dark:bg-gray-900 py-2 z-10 -mt-2 -mx-1 px-1",children:[" ",s.jsxs("h3",{className:"text-xl font-semibold flex items-center gap-2 text-gray-800 dark:text-gray-200",children:[s.jsx(As,{size:20,className:"text-recipe-secondary dark:text-recipe-accent"})," Ingredients"]}),s.jsxs(A,{variant:"ghost",size:"sm",onClick:N,className:"text-xs h-7 px-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",title:p?"Switch to Recipe View":"Switch to Shopping List View",children:[s.jsx(Ws,{size:14,className:"mr-1"}),p?"Recipe View":"Shopping List"]})]}),e.ingredients&&e.ingredients.length>0?s.jsx("ul",{className:"list-none space-y-2 text-sm text-gray-700 dark:text-gray-300",children:e.ingredients.map((b,y)=>s.jsxs("li",{className:"flex items-start group cursor-pointer",onClick:()=>m(y),children:[s.jsx("div",{className:M("flex-shrink-0 w-5 h-5 rounded border mr-2.5 mt-0.5 flex items-center justify-center transition-all duration-150",o.has(y)?"bg-green-500 border-green-500 group-hover:bg-green-600":"bg-transparent border-gray-300 dark:border-gray-600 group-hover:border-gray-400 dark:group-hover:border-gray-500"),"aria-hidden":"true",children:o.has(y)&&s.jsx(Fe,{className:"h-3.5 w-3.5 text-white"})}),s.jsx("span",{className:M("flex-1 transition-colors duration-150",o.has(y)?"line-through text-gray-400 dark:text-gray-500":"text-gray-700 dark:text-gray-300"),children:b})]},y))}):s.jsx("p",{className:"text-sm text-gray-500 italic",children:"No ingredients listed."}),e.macros&&!p&&s.jsxs("div",{className:"pt-5 mt-5 border-t dark:border-gray-700/50",children:[s.jsxs("h3",{className:"text-base font-semibold flex items-center gap-2 mb-2 text-gray-800 dark:text-gray-200",children:[s.jsx(Os,{size:18,className:"text-recipe-secondary dark:text-recipe-accent"})," Estimated Macros ",s.jsx("span",{className:"text-xs font-normal text-gray-500",children:"(per serving)"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-sm",children:[e.macros.calories&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Calories:"})," ",e.macros.calories]}),e.macros.protein&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Protein:"})," ",e.macros.protein]}),e.macros.carbs&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Carbs:"})," ",e.macros.carbs]}),e.macros.fat&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Fat:"})," ",e.macros.fat]}),Object.keys(e.macros).length===0&&s.jsx("p",{className:"text-gray-500 italic col-span-2",children:"Estimation unavailable."})]})]})]}),s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[!p&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xl font-semibold flex items-center gap-2 mb-4 text-gray-800 dark:text-gray-200",children:[s.jsx(Ds,{size:20,className:"text-recipe-secondary dark:text-recipe-accent"})," Instructions"]}),E.length>0?s.jsx("div",{className:"space-y-4",children:E.map((b,y)=>s.jsxs("div",{className:M("flex items-start gap-3 p-3 rounded-lg transition-all duration-150 cursor-pointer",i.has(y)?"bg-green-50 dark:bg-green-900/20 opacity-70":"hover:bg-gray-50 dark:hover:bg-gray-800/40"),onClick:()=>f(y),children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-gray-100 dark:bg-gray-700/50 flex items-center justify-center mt-0.5 transition-colors duration-150",children:i.has(y)?s.jsx(Fe,{className:"h-4 w-4 text-green-600 dark:text-green-500"}):s.jsx("span",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400",children:y+1})}),s.jsx("p",{className:M("flex-1 text-sm leading-relaxed text-gray-700 dark:text-gray-300 transition-colors duration-150",i.has(y)&&"text-gray-500 dark:text-gray-400"),children:b})]},y))}):s.jsx("p",{className:"text-sm text-gray-500 italic",children:"No instructions available."})]}),j.length>0&&!p&&s.jsxs("div",{className:"pt-5 mt-5 border-t border-gray-200 dark:border-gray-700/50",children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2 mb-3 text-gray-800 dark:text-gray-200",children:[s.jsx(Ps,{size:18,className:"text-recipe-secondary dark:text-recipe-accent"})," Tips & Variations"]}),s.jsx("div",{className:"space-y-3",children:j.map((b,y)=>s.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/30 p-3 rounded-md border-l-4 border-amber-400 dark:border-amber-600/60",children:s.jsx("p",{className:"text-sm text-amber-900 dark:text-amber-200 leading-relaxed",children:b})},y))})]}),e.reasoning&&!p&&s.jsxs("div",{className:"pt-5 mt-5 border-t border-gray-200 dark:border-gray-700/50",children:[s.jsxs("h3",{className:"text-base font-semibold flex items-center gap-2 mb-2 text-gray-800 dark:text-gray-200",children:[s.jsx(Ft,{size:18,className:"text-recipe-secondary dark:text-recipe-accent"})," Chef's Notes"]}),s.jsx("blockquote",{className:"border-l-4 border-blue-300 dark:border-blue-600/60 pl-4 italic text-sm text-gray-600 dark:text-gray-400 leading-relaxed bg-blue-50 dark:bg-blue-950/30 p-3 rounded-r-md",children:e.reasoning})]}),p&&s.jsxs("div",{className:"pt-5 mt-5 border-t dark:border-gray-700/50 text-center text-gray-500 italic",children:[s.jsx("p",{children:"Shopping list mode active. Uncheck items you have."}),s.jsx("p",{className:"text-xs mt-1",children:"(Instructions, tips, and macros are hidden in this view)"})]})]})]}),s.jsxs($t,{className:"p-4 flex flex-wrap justify-end items-center gap-3 border-t border-gray-200 dark:border-gray-700/50 bg-gray-50/80 dark:bg-gray-800/20",children:[s.jsxs(A,{variant:"outline",size:"sm",onClick:h,className:"flex items-center gap-1.5 text-gray-700 dark:text-gray-300",title:"Print Recipe",children:[s.jsx(Ls,{className:"h-4 w-4"}),"Print"]}),r&&s.jsxs(A,{className:"bg-recipe-primary hover:bg-recipe-secondary text-white dark:bg-recipe-accent dark:hover:bg-recipe-primary dark:text-black flex items-center gap-1.5 shadow",size:"sm",onClick:t,disabled:n,title:"Save this recipe to your collection",children:[s.jsx(Bs,{className:"h-4 w-4"}),n?"Saving...":"Save Recipe"]})]})]})};var Ue=["Enter"," "],zr=["ArrowDown","PageUp","Home"],un=["ArrowUp","PageDown","End"],Wr=[...zr,...un],Xr={ltr:[...Ue,"ArrowRight"],rtl:[...Ue,"ArrowLeft"]},Jr={ltr:["ArrowLeft"],rtl:["ArrowRight"]},be="Menu",[fe,Zr,Qr]=is(be),[ee,pn]=Se(be,[Qr,kt,_e]),ke=kt(),mn=_e(),[eo,te]=ee(be),[to,we]=ee(be),gn=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:o,onOpenChange:a,modal:i=!0}=e,c=ke(t),[d,p]=l.useState(null),g=l.useRef(!1),u=Tt(a),m=Gt(o);return l.useEffect(()=>{const f=()=>{g.current=!0,document.addEventListener("pointerdown",h,{capture:!0,once:!0}),document.addEventListener("pointermove",h,{capture:!0,once:!0})},h=()=>g.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",h,{capture:!0}),document.removeEventListener("pointermove",h,{capture:!0})}},[]),s.jsx(cs,{...c,children:s.jsx(eo,{scope:t,open:n,onOpenChange:u,content:d,onContentChange:p,children:s.jsx(to,{scope:t,onClose:l.useCallback(()=>u(!1),[u]),isUsingKeyboardRef:g,dir:m,modal:i,children:r})})})};gn.displayName=be;var no="MenuAnchor",qe=l.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=ke(n);return s.jsx(ls,{...o,...r,ref:t})});qe.displayName=no;var Ve="MenuPortal",[so,fn]=ee(Ve,{forceMount:void 0}),hn=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:o}=e,a=te(Ve,t);return s.jsx(so,{scope:t,forceMount:n,children:s.jsx(xe,{present:n||a.open,children:s.jsx(ds,{asChild:!0,container:o,children:r})})})};hn.displayName=Ve;var G="MenuContent",[ro,ze]=ee(G),xn=l.forwardRef((e,t)=>{const n=fn(G,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,a=te(G,e.__scopeMenu),i=we(G,e.__scopeMenu);return s.jsx(fe.Provider,{scope:e.__scopeMenu,children:s.jsx(xe,{present:r||a.open,children:s.jsx(fe.Slot,{scope:e.__scopeMenu,children:i.modal?s.jsx(oo,{...o,ref:t}):s.jsx(ao,{...o,ref:t})})})})}),oo=l.forwardRef((e,t)=>{const n=te(G,e.__scopeMenu),r=l.useRef(null),o=X(t,r);return l.useEffect(()=>{const a=r.current;if(a)return Rs(a)},[]),s.jsx(We,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:I(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),ao=l.forwardRef((e,t)=>{const n=te(G,e.__scopeMenu);return s.jsx(We,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),io=ps("MenuContent.ScrollLock"),We=l.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:c,onEntryFocus:d,onEscapeKeyDown:p,onPointerDownOutside:g,onFocusOutside:u,onInteractOutside:m,onDismiss:f,disableOutsideScroll:h,...N}=e,E=te(G,n),j=we(G,n),b=ke(n),y=mn(n),O=Zr(n),[F,J]=l.useState(null),T=l.useRef(null),ne=X(t,T,E.onContentChange),U=l.useRef(0),H=l.useRef(""),se=l.useRef(0),w=l.useRef(null),D=l.useRef("right"),R=l.useRef(0),P=h?js:l.Fragment,Oe=h?{as:io,allowPinchZoom:!0}:void 0,x=v=>{var re,et;const S=H.current+v,K=O().filter(Y=>!Y.disabled),q=document.activeElement,De=(re=K.find(Y=>Y.ref.current===q))==null?void 0:re.textValue,Pe=K.map(Y=>Y.textValue),Qe=bo(Pe,S,De),ce=(et=K.find(Y=>Y.textValue===Qe))==null?void 0:et.ref.current;(function Y(tt){H.current=tt,window.clearTimeout(U.current),tt!==""&&(U.current=window.setTimeout(()=>Y(""),1e3))})(S),ce&&setTimeout(()=>ce.focus())};l.useEffect(()=>()=>window.clearTimeout(U.current),[]),Ss();const C=l.useCallback(v=>{var K,q;return D.current===((K=w.current)==null?void 0:K.side)&&Co(v,(q=w.current)==null?void 0:q.area)},[]);return s.jsx(ro,{scope:n,searchRef:H,onItemEnter:l.useCallback(v=>{C(v)&&v.preventDefault()},[C]),onItemLeave:l.useCallback(v=>{var S;C(v)||((S=T.current)==null||S.focus(),J(null))},[C]),onTriggerLeave:l.useCallback(v=>{C(v)&&v.preventDefault()},[C]),pointerGraceTimerRef:se,onPointerGraceIntentChange:l.useCallback(v=>{w.current=v},[]),children:s.jsx(P,{...Oe,children:s.jsx(_s,{asChild:!0,trapped:o,onMountAutoFocus:I(a,v=>{var S;v.preventDefault(),(S=T.current)==null||S.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:s.jsx(ms,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:p,onPointerDownOutside:g,onFocusOutside:u,onInteractOutside:m,onDismiss:f,children:s.jsx(Ot,{asChild:!0,...y,dir:j.dir,orientation:"vertical",loop:r,currentTabStopId:F,onCurrentTabStopIdChange:J,onEntryFocus:I(d,v=>{j.isUsingKeyboardRef.current||v.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(gs,{role:"menu","aria-orientation":"vertical","data-state":An(E.open),"data-radix-menu-content":"",dir:j.dir,...b,...N,ref:ne,style:{outline:"none",...N.style},onKeyDown:I(N.onKeyDown,v=>{const K=v.target.closest("[data-radix-menu-content]")===v.currentTarget,q=v.ctrlKey||v.altKey||v.metaKey,De=v.key.length===1;K&&(v.key==="Tab"&&v.preventDefault(),!q&&De&&x(v.key));const Pe=T.current;if(v.target!==Pe||!Wr.includes(v.key))return;v.preventDefault();const ce=O().filter(re=>!re.disabled).map(re=>re.ref.current);un.includes(v.key)&&ce.reverse(),vo(ce)}),onBlur:I(e.onBlur,v=>{v.currentTarget.contains(v.target)||(window.clearTimeout(U.current),H.current="")}),onPointerMove:I(e.onPointerMove,he(v=>{const S=v.target,K=R.current!==v.clientX;if(v.currentTarget.contains(S)&&K){const q=v.clientX>R.current?"right":"left";D.current=q,R.current=v.clientX}}))})})})})})})});xn.displayName=G;var co="MenuGroup",Xe=l.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(B.div,{role:"group",...r,ref:t})});Xe.displayName=co;var lo="MenuLabel",vn=l.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(B.div,{...r,ref:t})});vn.displayName=lo;var Ie="MenuItem",jt="menu.itemSelect",Te=l.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...o}=e,a=l.useRef(null),i=we(Ie,e.__scopeMenu),c=ze(Ie,e.__scopeMenu),d=X(t,a),p=l.useRef(!1),g=()=>{const u=a.current;if(!n&&u){const m=new CustomEvent(jt,{bubbles:!0,cancelable:!0});u.addEventListener(jt,f=>r==null?void 0:r(f),{once:!0}),us(u,m),m.defaultPrevented?p.current=!1:i.onClose()}};return s.jsx(yn,{...o,ref:d,disabled:n,onClick:I(e.onClick,g),onPointerDown:u=>{var m;(m=e.onPointerDown)==null||m.call(e,u),p.current=!0},onPointerUp:I(e.onPointerUp,u=>{var m;p.current||(m=u.currentTarget)==null||m.click()}),onKeyDown:I(e.onKeyDown,u=>{const m=c.searchRef.current!=="";n||m&&u.key===" "||Ue.includes(u.key)&&(u.currentTarget.click(),u.preventDefault())})})});Te.displayName=Ie;var yn=l.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...a}=e,i=ze(Ie,n),c=mn(n),d=l.useRef(null),p=X(t,d),[g,u]=l.useState(!1),[m,f]=l.useState("");return l.useEffect(()=>{const h=d.current;h&&f((h.textContent??"").trim())},[a.children]),s.jsx(fe.ItemSlot,{scope:n,disabled:r,textValue:o??m,children:s.jsx(Dt,{asChild:!0,...c,focusable:!r,children:s.jsx(B.div,{role:"menuitem","data-highlighted":g?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:p,onPointerMove:I(e.onPointerMove,he(h=>{r?i.onItemLeave(h):(i.onItemEnter(h),h.defaultPrevented||h.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:I(e.onPointerLeave,he(h=>i.onItemLeave(h))),onFocus:I(e.onFocus,()=>u(!0)),onBlur:I(e.onBlur,()=>u(!1))})})})}),uo="MenuCheckboxItem",bn=l.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...o}=e;return s.jsx(In,{scope:e.__scopeMenu,checked:n,children:s.jsx(Te,{role:"menuitemcheckbox","aria-checked":Re(n)?"mixed":n,...o,ref:t,"data-state":Ze(n),onSelect:I(o.onSelect,()=>r==null?void 0:r(Re(n)?!0:!n),{checkForDefaultPrevented:!1})})})});bn.displayName=uo;var wn="MenuRadioGroup",[po,mo]=ee(wn,{value:void 0,onValueChange:()=>{}}),Cn=l.forwardRef((e,t)=>{const{value:n,onValueChange:r,...o}=e,a=Tt(r);return s.jsx(po,{scope:e.__scopeMenu,value:n,onValueChange:a,children:s.jsx(Xe,{...o,ref:t})})});Cn.displayName=wn;var Nn="MenuRadioItem",En=l.forwardRef((e,t)=>{const{value:n,...r}=e,o=mo(Nn,e.__scopeMenu),a=n===o.value;return s.jsx(In,{scope:e.__scopeMenu,checked:a,children:s.jsx(Te,{role:"menuitemradio","aria-checked":a,...r,ref:t,"data-state":Ze(a),onSelect:I(r.onSelect,()=>{var i;return(i=o.onValueChange)==null?void 0:i.call(o,n)},{checkForDefaultPrevented:!1})})})});En.displayName=Nn;var Je="MenuItemIndicator",[In,go]=ee(Je,{checked:!1}),Rn=l.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...o}=e,a=go(Je,n);return s.jsx(xe,{present:r||Re(a.checked)||a.checked===!0,children:s.jsx(B.span,{...o,ref:t,"data-state":Ze(a.checked)})})});Rn.displayName=Je;var fo="MenuSeparator",Sn=l.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(B.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});Sn.displayName=fo;var ho="MenuArrow",jn=l.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=ke(n);return s.jsx(fs,{...o,...r,ref:t})});jn.displayName=ho;var xo="MenuSub",[_a,_n]=ee(xo),de="MenuSubTrigger",Mn=l.forwardRef((e,t)=>{const n=te(de,e.__scopeMenu),r=we(de,e.__scopeMenu),o=_n(de,e.__scopeMenu),a=ze(de,e.__scopeMenu),i=l.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:d}=a,p={__scopeMenu:e.__scopeMenu},g=l.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return l.useEffect(()=>g,[g]),l.useEffect(()=>{const u=c.current;return()=>{window.clearTimeout(u),d(null)}},[c,d]),s.jsx(qe,{asChild:!0,...p,children:s.jsx(yn,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":An(n.open),...e,ref:At(t,o.onTriggerChange),onClick:u=>{var m;(m=e.onClick)==null||m.call(e,u),!(e.disabled||u.defaultPrevented)&&(u.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:I(e.onPointerMove,he(u=>{a.onItemEnter(u),!u.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(a.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),g()},100))})),onPointerLeave:I(e.onPointerLeave,he(u=>{var f,h;g();const m=(f=n.content)==null?void 0:f.getBoundingClientRect();if(m){const N=(h=n.content)==null?void 0:h.dataset.side,E=N==="right",j=E?-5:5,b=m[E?"left":"right"],y=m[E?"right":"left"];a.onPointerGraceIntentChange({area:[{x:u.clientX+j,y:u.clientY},{x:b,y:m.top},{x:y,y:m.top},{x:y,y:m.bottom},{x:b,y:m.bottom}],side:N}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(u),u.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:I(e.onKeyDown,u=>{var f;const m=a.searchRef.current!=="";e.disabled||m&&u.key===" "||Xr[r.dir].includes(u.key)&&(n.onOpenChange(!0),(f=n.content)==null||f.focus(),u.preventDefault())})})})});Mn.displayName=de;var kn="MenuSubContent",Tn=l.forwardRef((e,t)=>{const n=fn(G,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,a=te(G,e.__scopeMenu),i=we(G,e.__scopeMenu),c=_n(kn,e.__scopeMenu),d=l.useRef(null),p=X(t,d);return s.jsx(fe.Provider,{scope:e.__scopeMenu,children:s.jsx(xe,{present:r||a.open,children:s.jsx(fe.Slot,{scope:e.__scopeMenu,children:s.jsx(We,{id:c.contentId,"aria-labelledby":c.triggerId,...o,ref:p,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:g=>{var u;i.isUsingKeyboardRef.current&&((u=d.current)==null||u.focus()),g.preventDefault()},onCloseAutoFocus:g=>g.preventDefault(),onFocusOutside:I(e.onFocusOutside,g=>{g.target!==c.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:I(e.onEscapeKeyDown,g=>{i.onClose(),g.preventDefault()}),onKeyDown:I(e.onKeyDown,g=>{var f;const u=g.currentTarget.contains(g.target),m=Jr[i.dir].includes(g.key);u&&m&&(a.onOpenChange(!1),(f=c.trigger)==null||f.focus(),g.preventDefault())})})})})})});Tn.displayName=kn;function An(e){return e?"open":"closed"}function Re(e){return e==="indeterminate"}function Ze(e){return Re(e)?"indeterminate":e?"checked":"unchecked"}function vo(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function yo(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function bo(e,t,n){const o=t.length>1&&Array.from(t).every(p=>p===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let i=yo(e,Math.max(a,0));o.length===1&&(i=i.filter(p=>p!==n));const d=i.find(p=>p.toLowerCase().startsWith(o.toLowerCase()));return d!==n?d:void 0}function wo(e,t){const{x:n,y:r}=e;let o=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const c=t[a],d=t[i],p=c.x,g=c.y,u=d.x,m=d.y;g>r!=m>r&&n<(u-p)*(r-g)/(m-g)+p&&(o=!o)}return o}function Co(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return wo(n,t)}function he(e){return t=>t.pointerType==="mouse"?e(t):void 0}var No=gn,Eo=qe,Io=hn,Ro=xn,So=Xe,jo=vn,_o=Te,Mo=bn,ko=Cn,To=En,Ao=Rn,Oo=Sn,Do=jn,Po=Mn,Lo=Tn,Ae="DropdownMenu",[$o,Ma]=Se(Ae,[pn]),k=pn(),[Go,On]=$o(Ae),Dn=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:o,defaultOpen:a,onOpenChange:i,modal:c=!0}=e,d=k(t),p=l.useRef(null),[g,u]=_t({prop:o,defaultProp:a??!1,onChange:i,caller:Ae});return s.jsx(Go,{scope:t,triggerId:nt(),triggerRef:p,contentId:nt(),open:g,onOpenChange:u,onOpenToggle:l.useCallback(()=>u(m=>!m),[u]),modal:c,children:s.jsx(No,{...d,open:g,onOpenChange:u,dir:r,modal:c,children:n})})};Dn.displayName=Ae;var Pn="DropdownMenuTrigger",Ln=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=e,a=On(Pn,n),i=k(n);return s.jsx(Eo,{asChild:!0,...i,children:s.jsx(B.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:At(t,a.triggerRef),onPointerDown:I(e.onPointerDown,c=>{!r&&c.button===0&&c.ctrlKey===!1&&(a.onOpenToggle(),a.open||c.preventDefault())}),onKeyDown:I(e.onKeyDown,c=>{r||(["Enter"," "].includes(c.key)&&a.onOpenToggle(),c.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});Ln.displayName=Pn;var Fo="DropdownMenuPortal",$n=e=>{const{__scopeDropdownMenu:t,...n}=e,r=k(t);return s.jsx(Io,{...r,...n})};$n.displayName=Fo;var Gn="DropdownMenuContent",Fn=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=On(Gn,n),a=k(n),i=l.useRef(!1);return s.jsx(Ro,{id:o.contentId,"aria-labelledby":o.triggerId,...a,...r,ref:t,onCloseAutoFocus:I(e.onCloseAutoFocus,c=>{var d;i.current||(d=o.triggerRef.current)==null||d.focus(),i.current=!1,c.preventDefault()}),onInteractOutside:I(e.onInteractOutside,c=>{const d=c.detail.originalEvent,p=d.button===0&&d.ctrlKey===!0,g=d.button===2||p;(!o.modal||g)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Fn.displayName=Gn;var Uo="DropdownMenuGroup",Ko=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=k(n);return s.jsx(So,{...o,...r,ref:t})});Ko.displayName=Uo;var Bo="DropdownMenuLabel",Un=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=k(n);return s.jsx(jo,{...o,...r,ref:t})});Un.displayName=Bo;var Ho="DropdownMenuItem",Kn=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=k(n);return s.jsx(_o,{...o,...r,ref:t})});Kn.displayName=Ho;var Yo="DropdownMenuCheckboxItem",Bn=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=k(n);return s.jsx(Mo,{...o,...r,ref:t})});Bn.displayName=Yo;var qo="DropdownMenuRadioGroup",Vo=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=k(n);return s.jsx(ko,{...o,...r,ref:t})});Vo.displayName=qo;var zo="DropdownMenuRadioItem",Hn=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=k(n);return s.jsx(To,{...o,...r,ref:t})});Hn.displayName=zo;var Wo="DropdownMenuItemIndicator",Yn=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=k(n);return s.jsx(Ao,{...o,...r,ref:t})});Yn.displayName=Wo;var Xo="DropdownMenuSeparator",qn=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=k(n);return s.jsx(Oo,{...o,...r,ref:t})});qn.displayName=Xo;var Jo="DropdownMenuArrow",Zo=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=k(n);return s.jsx(Do,{...o,...r,ref:t})});Zo.displayName=Jo;var Qo="DropdownMenuSubTrigger",Vn=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=k(n);return s.jsx(Po,{...o,...r,ref:t})});Vn.displayName=Qo;var ea="DropdownMenuSubContent",zn=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=k(n);return s.jsx(Lo,{...o,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});zn.displayName=ea;var ta=Dn,na=Ln,sa=$n,Wn=Fn,Xn=Un,Jn=Kn,Zn=Bn,Qn=Hn,es=Yn,ts=qn,ns=Vn,ss=zn;const ra=ta,oa=na,aa=l.forwardRef(({className:e,inset:t,children:n,...r},o)=>s.jsxs(ns,{ref:o,className:M("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[n,s.jsx(Hs,{className:"ml-auto h-4 w-4"})]}));aa.displayName=ns.displayName;const ia=l.forwardRef(({className:e,...t},n)=>s.jsx(ss,{ref:n,className:M("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));ia.displayName=ss.displayName;const rs=l.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(sa,{children:s.jsx(Wn,{ref:r,sideOffset:t,className:M("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));rs.displayName=Wn.displayName;const Ke=l.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(Jn,{ref:r,className:M("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));Ke.displayName=Jn.displayName;const ca=l.forwardRef(({className:e,children:t,checked:n,...r},o)=>s.jsxs(Zn,{ref:o,className:M("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(es,{children:s.jsx(Fe,{className:"h-4 w-4"})})}),t]}));ca.displayName=Zn.displayName;const la=l.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(Qn,{ref:r,className:M("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(es,{children:s.jsx(Ut,{className:"h-2 w-2 fill-current"})})}),t]}));la.displayName=Qn.displayName;const da=l.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(Xn,{ref:r,className:M("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));da.displayName=Xn.displayName;const ua=l.forwardRef(({className:e,...t},n)=>s.jsx(ts,{ref:n,className:M("-mx-1 my-1 h-px bg-muted",e),...t}));ua.displayName=ts.displayName;const pa=({onRecipeGenerated:e,initialRecipe:t})=>{const[n,r]=l.useState(!1),[o,a]=l.useState([]),[i,c]=l.useState(""),[d,p]=l.useState(!1),[g,u]=l.useState(!1),[m,f]=l.useState(4),[h,N]=l.useState(!1),[E,j]=l.useState(""),[b,y]=l.useState([]),[O,F]=l.useState(!1),J=l.useRef(null),{toast:T}=je();l.useEffect(()=>{n&&o.length===0&&a([{content:"Hello! I'm your AI Chef assistant. How can I help you with your recipe today? You can ask me to modify ingredients, adjust portions, or suggest alternatives.",isUser:!1}])},[n,o.length]),l.useEffect(()=>{var w;(w=J.current)==null||w.scrollIntoView({behavior:"smooth"})},[o]),l.useEffect(()=>{if(t!=null&&t.servings){const w=t.servings.match(/(\d+)/);w&&f(parseInt(w[1],10))}},[t]);const ne=async w=>{if(w.preventDefault(),!i.trim()||d)return;const D=i.trim();a(R=>[...R,{content:D,isUser:!0}]),c(""),p(!0);try{const R=await Mr(D,t);R.recipe?(a(P=>[...P,{content:`I've created a new recipe for you: "${R.recipe.title}"`,isUser:!1}]),e&&e(R.recipe)):a(P=>[...P,{content:R.message,isUser:!1}])}catch(R){console.error("Error generating chat response:",R),a(P=>[...P,{content:"Sorry, I encountered an error while processing your request. Please try again.",isUser:!1}]),T({title:"Error",description:"Failed to generate a response",variant:"destructive"})}finally{p(!1)}},U=()=>{r(w=>!w)},H=async()=>{if(!t){T({title:"No Recipe",description:"There is no recipe to scale",variant:"destructive"});return}p(!0);try{const w=await jr(t,m);e&&(e(w),a(D=>[...D,{content:`I've scaled the recipe to ${m} servings.`,isUser:!1}])),u(!1)}catch(w){console.error("Error scaling recipe:",w),T({title:"Error",description:"Failed to scale the recipe",variant:"destructive"})}finally{p(!1)}},se=async()=>{if(!E.trim()){T({title:"No Ingredient",description:"Please enter an ingredient to find substitutions",variant:"destructive"});return}F(!0);try{const w=await _r(E,t);y(w);const D=`Here are some substitutions for ${E}:

`+w.map(R=>`• ${R.substitution}: ${R.notes}`).join(`

`);a(R=>[...R,{content:D,isUser:!1}]),N(!1)}catch(w){console.error("Error finding substitutions:",w),T({title:"Error",description:"Failed to find ingredient substitutions",variant:"destructive"})}finally{F(!1)}};return s.jsxs("div",{className:"fixed bottom-4 right-4 z-50",children:[n?s.jsxs(Ne,{className:"w-80 sm:w-96 shadow-lg border-recipe-primary/20",children:[s.jsx(Pt,{className:"p-3 border-b",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("div",{className:"flex items-center",children:s.jsxs(Lt,{className:"text-sm font-medium flex items-center",children:[s.jsx(Be,{className:"h-5 w-5 mr-2 text-recipe-primary"}),"AI Chef Assistant"]})}),s.jsxs("div",{className:"flex items-center gap-1",children:[t&&s.jsxs(ra,{children:[s.jsx(oa,{asChild:!0,children:s.jsxs(A,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 rounded-full",children:[s.jsx("span",{className:"sr-only",children:"Recipe Tools"}),s.jsx("span",{className:"text-lg",children:"⋮"})]})}),s.jsxs(rs,{align:"end",children:[s.jsx(rt,{asChild:!0,onClick:()=>u(!0),children:s.jsxs(Ke,{children:[s.jsx(Vs,{className:"h-4 w-4 mr-2"}),"Scale Recipe"]})}),s.jsx(rt,{asChild:!0,onClick:()=>N(!0),children:s.jsxs(Ke,{children:[s.jsx(qs,{className:"h-4 w-4 mr-2"}),"Find Substitutions"]})})]})]}),s.jsxs(A,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 rounded-full",onClick:U,children:[s.jsx("span",{className:"sr-only",children:"Close"}),s.jsx("span",{className:"text-lg",children:"×"})]})]})]})}),s.jsx(Ee,{className:"p-0",children:s.jsxs($s,{className:"h-[300px] p-4",children:[o.map((w,D)=>s.jsx("div",{className:`mb-3 ${w.isUser?"text-right":"text-left"}`,children:s.jsx("div",{className:`inline-block rounded-lg px-3 py-2 max-w-[80%] ${w.isUser?"bg-recipe-primary text-white":"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}`,children:w.content.split(`
`).map((R,P)=>s.jsxs(hs.Fragment,{children:[R,P<w.content.split(`
`).length-1&&s.jsx("br",{})]},P))})},D)),s.jsx("div",{ref:J})]})}),s.jsx($t,{className:"p-3 pt-2 border-t",children:s.jsxs("form",{onSubmit:ne,className:"flex w-full gap-2",children:[s.jsx(ue,{placeholder:"Type your message...",value:i,onChange:w=>c(w.target.value),disabled:d,className:"flex-1"}),s.jsxs(A,{type:"submit",size:"icon",disabled:d||!i.trim(),className:"bg-recipe-primary hover:bg-recipe-secondary",children:[s.jsx(zs,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Send"})]})]})})]}):s.jsxs(A,{onClick:U,className:"h-12 w-12 rounded-full bg-recipe-primary hover:bg-recipe-secondary shadow-lg",children:[s.jsx(Ys,{className:"h-5 w-5"}),s.jsx("span",{className:"sr-only",children:"Open Chat"})]}),s.jsx(ot,{open:g,onOpenChange:u,children:s.jsxs(at,{className:"sm:max-w-[425px]",children:[s.jsxs(it,{children:[s.jsx(ct,{children:"Scale Recipe"}),s.jsx(lt,{children:"Adjust the number of servings to scale this recipe."})]}),s.jsx("div",{className:"grid gap-4 py-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx($,{htmlFor:"servings",children:"Servings"}),s.jsx(ue,{id:"servings",type:"number",min:"1",max:"20",value:m,onChange:w=>f(parseInt(w.target.value,10)),className:"w-full"})]})}),s.jsxs(dt,{children:[s.jsx(A,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),s.jsx(A,{onClick:H,disabled:d,children:d?"Scaling...":"Scale Recipe"})]})]})}),s.jsx(ot,{open:h,onOpenChange:N,children:s.jsxs(at,{className:"sm:max-w-[425px]",children:[s.jsxs(it,{children:[s.jsx(ct,{children:"Find Ingredient Substitutions"}),s.jsx(lt,{children:"Enter an ingredient you'd like to substitute."})]}),s.jsx("div",{className:"grid gap-4 py-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx($,{htmlFor:"ingredient",children:"Ingredient"}),s.jsx(ue,{id:"ingredient",value:E,onChange:w=>j(w.target.value),placeholder:"e.g., butter, eggs, milk",className:"w-full"})]})}),s.jsxs(dt,{children:[s.jsx(A,{variant:"outline",onClick:()=>N(!1),children:"Cancel"}),s.jsx(A,{onClick:se,disabled:O,children:O?"Finding...":"Find Substitutions"})]})]})})]})},ka=()=>{const[e,t]=l.useState(null),[n,r]=l.useState(!1),[o,a]=l.useState(!1),{currentUser:i}=Mt(),{toast:c}=je(),d=l.useCallback(g=>{console.log("--- Recipe Received in HomePage ---"),console.log("Title:",g.title),console.log("Ingredients Array:",g.ingredients),console.log("Instructions:",g.instructions),console.log("----------------------------------"),t(g),setTimeout(()=>{const u=document.getElementById("recipe-result-section");u==null||u.scrollIntoView({behavior:"smooth",block:"start"})},100)},[]),p=async()=>{if(!e){c({title:"No Recipe Generated",description:"Please generate a recipe first.",variant:"destructive"});return}if(!i){c({title:"Login Required",description:"Please log in or sign up to save recipes.",variant:"destructive"});return}a(!0);try{await vs(e),c({title:"Recipe Saved!",description:`"${e.title}" added to your collection.`,variant:"default"})}catch(g){console.error("Error saving recipe:",g);const u=g instanceof Error?g.message:"An unknown error occurred";c({title:"Failed to Save Recipe",description:`Could not save the recipe. ${u}`,variant:"destructive"})}finally{a(!1)}};return s.jsxs("div",{className:"container mx-auto max-w-7xl px-4 py-8 md:py-12",children:[s.jsxs("section",{className:"mb-10 md:mb-16 text-center",children:[s.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold mb-4 text-gray-900 dark:text-white tracking-tight",children:["AI Recipe ",s.jsx("span",{className:"text-recipe-primary",children:"Innovator"})]}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",children:"Turn kitchen staples into culinary delights! Enter your ingredients, set your preferences, and let our AI chef whip up a unique recipe just for you."})]}),s.jsx("section",{className:"mb-10 md:mb-16",children:s.jsx(qr,{onRecipeGenerated:d,isGenerating:n,setIsGenerating:r})}),(n||e)&&s.jsx(Gs,{className:"my-10 md:my-16"}),s.jsxs("section",{id:"recipe-result-section",className:"min-h-[200px]",children:[" ",n&&s.jsxs("div",{className:"flex flex-col items-center justify-center text-center my-12 py-8 space-y-4",children:[s.jsx(xs,{size:"lg",className:"text-recipe-primary"}),s.jsx("p",{className:"text-lg font-medium text-gray-700 dark:text-gray-300",children:"Crafting your recipe..."}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Our AI chef is mixing ingredients and checking the oven!"})]}),!n&&e&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-center mb-6 text-gray-900 dark:text-white",children:["Your ",s.jsx("span",{className:"text-recipe-secondary",children:"Generated Recipe"})]}),s.jsx(Vr,{recipe:e,onSave:p,isSaving:o}),!i&&s.jsxs(Fs,{variant:"default",className:"max-w-2xl mx-auto mt-6 border-recipe-primary/30 bg-recipe-light/30 dark:bg-gray-800/30",children:[s.jsx(Ft,{className:"h-4 w-4"}),s.jsx(Us,{className:"font-semibold",children:"Want to save this recipe?"}),s.jsxs(Ks,{className:"text-sm",children:[s.jsx(st,{to:"/login",className:"font-medium text-recipe-primary hover:underline",children:"Log in"})," or"," ",s.jsx(st,{to:"/signup",className:"font-medium text-recipe-primary hover:underline",children:"sign up"})," ","to add this creation to your personal collection."]})]})]})]}),s.jsx(pa,{initialRecipe:e,onRecipeGenerated:d})]})};export{ka as default};
