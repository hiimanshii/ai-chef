import{c as j,r as n,u as v,E as w,F as N,j as e,y as h,C as L,B as k,L as C}from"./index-DCowwy91.js";import{I as p}from"./input-DxuCPlzY.js";import{L as g}from"./label-Io-jKpJW.js";import{C as E,a as I,b as P,d as S,c as A,e as F}from"./card-CEx60_wy.js";import{A as D,a as z,b as B}from"./alert-DDAkWb-a.js";import{C as q}from"./circle-alert-C3Z5H4JS.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=j("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),G=()=>{const[o,u]=n.useState(""),[l,y]=n.useState(""),[t,c]=n.useState(null),{login:b,isLoading:a,currentUser:i}=v(),d=w(),m=N();n.useEffect(()=>{var r,s;if(i&&!a){const x=((s=(r=m.state)==null?void 0:r.from)==null?void 0:s.pathname)||"/create";console.log(`Login Page: User already logged in, redirecting to ${x}`),d(x,{replace:!0})}},[i,a,d,m.state]);const f=async r=>{if(r.preventDefault(),c(null),!o||!l){c("Please enter both email and password.");return}try{await b(o,l)}catch(s){console.error("Login Page Error:",s),c(s instanceof Error?s.message:"Invalid credentials or server error. Please try again.")}};return a&&!i?e.jsx("div",{className:"container flex items-center justify-center min-h-[80vh] py-8",children:e.jsx(h,{size:"lg",text:"Checking authentication..."})}):i?null:e.jsxs("div",{className:"container flex items-center justify-center min-h-[calc(100vh-150px)] py-8 animate-fade-in",children:[" ",e.jsxs(E,{className:"w-full max-w-md shadow-xl border border-gray-200 dark:border-gray-800 rounded-lg overflow-hidden",children:[" ",e.jsxs(I,{className:"space-y-2 text-center bg-gray-50 dark:bg-gray-900/50 p-6 border-b dark:border-gray-800",children:[e.jsx("div",{className:"flex justify-center mb-3",children:e.jsx(L,{className:"h-14 w-14 text-recipe-primary"})}),e.jsx(P,{className:"text-2xl font-bold tracking-tight",children:"Welcome Back!"}),e.jsx(S,{children:"Log in to access your saved recipes and preferences."})]}),e.jsxs("form",{onSubmit:f,children:[e.jsxs(A,{className:"p-6 space-y-5",children:[" ",t&&e.jsxs(D,{variant:"destructive",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx(z,{children:"Login Failed"}),e.jsx(B,{children:t})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"email",children:"Email"}),e.jsx(p,{id:"email",type:"email",placeholder:"you@example.com",value:o,onChange:r=>u(r.target.value),required:!0,disabled:a,"aria-describedby":t?"error-message":void 0,className:"text-base sm:text-sm"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"password",children:"Password"}),e.jsx(p,{id:"password",type:"password",placeholder:"••••••••",value:l,onChange:r=>y(r.target.value),required:!0,disabled:a,"aria-describedby":t?"error-message":void 0,className:"text-base sm:text-sm"})]})]}),e.jsxs(F,{className:"flex flex-col space-y-4 p-6 pt-4",children:[" ",e.jsxs(k,{type:"submit",className:"w-full bg-recipe-primary hover:bg-recipe-secondary text-white dark:bg-recipe-accent dark:hover:bg-recipe-primary dark:text-black text-base font-semibold py-2.5 shadow-md transition-all duration-200 hover:shadow-lg disabled:opacity-60",disabled:a,size:"lg",children:[a?e.jsx(h,{size:"sm",className:"mr-2 border-t-white"}):e.jsx(H,{className:"mr-2 h-5 w-5"}),a?"Logging In...":"Log In"]}),e.jsxs("div",{className:"text-center text-sm text-gray-600 dark:text-gray-400",children:["Don't have an account?"," ",e.jsx(C,{to:"/signup",className:"font-medium text-recipe-primary hover:underline",children:"Sign up here"})]})]})]})]})]})};export{G as default};
