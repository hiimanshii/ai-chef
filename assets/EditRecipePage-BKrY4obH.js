import{c as L,N as P,E as U,i as q,r as p,j as e,y as H,B as v,h as O,O as X,I as Z,Q}from"./index-C0Eqig3U.js";import{T as u,L as Y}from"./textarea-ClrPereG.js";import{C as $,a as G,b as J,d as K,c as W,e as _}from"./card-XD_VQd1P.js";import{I as c}from"./input-Dl9dDyYd.js";import{S as ee,a as se,b as ae,c as te,d as re}from"./select-ByOXG2w2.js";import{L as n}from"./label-CpBi_1et.js";import{A as R,a as F,b as I}from"./alert-DGEpsjEo.js";import{S as j}from"./separator-DyRVbhgN.js";import{C as A}from"./circle-alert-Ddu7F-eT.js";import{S as ie,L as ne,U as le,Z as ce,C as oe,a as de,I as me}from"./zap-s9cLjA-y.js";import{C as N}from"./clock-CYToF-4q.js";import{S as xe}from"./save-D6v2UtVk.js";import"./Combination-CblnsaFj.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=L("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=L("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),ge=["Any","Beginner","Intermediate","Advanced","Easy","Medium","Hard"],Re=()=>{var k,S,T,w;const{recipeId:x}=P(),f=U(),{toast:o}=q(),[s,m]=p.useState(null),[z,y]=p.useState(!0),[b,C]=p.useState(!1),[h,l]=p.useState(null);p.useEffect(()=>{if(!x){l("No recipe ID provided."),y(!1);return}(async()=>{y(!0),l(null);try{const t=await X(x);m(Z(t))}catch(t){console.error("Error fetching recipe for edit:",t);const a=t instanceof Error?t.message:"Failed to load recipe data.";l(a),o({title:"Error Loading Recipe",description:a,variant:"destructive"})}finally{y(!1)}})()},[x,o]);const d=r=>{const{name:t,value:a}=r.target;m(i=>i?{...i,[t]:a}:null)},D=(r,t)=>{const a=t==="Any"?"":t;m(i=>i?{...i,[r]:a}:null)},g=r=>{const{name:t,value:a}=r.target;m(i=>i?{...i,macros:{...i.macros||{},[t]:a}}:null)},M=r=>{const t=r.target.value.split(`
`).filter(a=>a.trim()!=="");m(a=>a?{...a,tips:t}:null)},V=r=>{const t=r.target.value.split(`
`).filter(a=>a.trim()!=="");m(a=>a?{...a,ingredients:t}:null)},B=async r=>{var t,a;if(r.preventDefault(),!x||!s){l("Recipe data is missing."),o({title:"Save Error",description:"Recipe data is missing.",variant:"destructive"});return}if(!((t=s.title)!=null&&t.trim())){l("Recipe title cannot be empty."),o({title:"Validation Error",description:"Recipe title cannot be empty.",variant:"destructive"});return}if(!s.ingredients||s.ingredients.length===0||s.ingredients.every(i=>!i.trim())){l("Recipe must have at least one ingredient."),o({title:"Validation Error",description:"Please add at least one ingredient.",variant:"destructive"});return}if(!((a=s.instructions)!=null&&a.trim())){l("Recipe instructions cannot be empty."),o({title:"Validation Error",description:"Please provide instructions.",variant:"destructive"});return}C(!0),l(null);try{await Q(x,s),o({title:"Recipe Updated!",description:`"${s.title}" has been saved successfully.`,variant:"default"}),f("/my-recipes")}catch(i){console.error("Error updating recipe:",i);const E=i instanceof Error?i.message:"Could not update recipe.";l(E),o({title:"Update Failed",description:E,variant:"destructive"})}finally{C(!1)}};return z?e.jsxs("div",{className:"container mx-auto px-4 py-12 flex flex-col items-center justify-center min-h-[60vh]",children:[e.jsx(H,{size:"lg"}),e.jsx("p",{className:"mt-4 text-lg text-gray-600 dark:text-gray-400",children:"Loading Recipe Editor..."})]}):h||!s?e.jsxs("div",{className:"container mx-auto max-w-2xl px-4 py-12",children:[e.jsxs(R,{variant:"destructive",className:"mb-6",children:[e.jsx(A,{className:"h-5 w-5"}),e.jsx(F,{className:"font-semibold",children:"Error Loading Recipe"}),e.jsx(I,{children:h||"Could not load recipe data. It might have been deleted or there was a network issue."})]}),e.jsxs(v,{variant:"outline",onClick:()=>f("/my-recipes"),className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-4 w-4"})," Back to My Recipes"]})]}):e.jsxs("div",{className:"container mx-auto max-w-5xl px-4 py-8 md:py-12",children:[" ",e.jsxs($,{className:"shadow-lg border border-gray-200 dark:border-gray-800 overflow-hidden",children:[e.jsxs(G,{className:"bg-gray-50 dark:bg-gray-900/50 border-b dark:border-gray-800 p-5 sm:p-6",children:[e.jsx(J,{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Edit Recipe"}),e.jsxs(K,{className:"text-base text-gray-600 dark:text-gray-400 mt-1",children:['Modify the details for "',s.title||"Untitled Recipe",'" below.']})]}),e.jsxs("form",{onSubmit:B,children:[e.jsxs(W,{className:"p-5 sm:p-6 space-y-8",children:[" ",e.jsxs("section",{className:"space-y-5",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-200 border-b pb-2 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs(n,{htmlFor:"title",className:"font-medium",children:["Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(c,{id:"title",name:"title",value:s.title,onChange:d,required:!0,placeholder:"e.g., Spicy Chicken Curry"})]}),e.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[" ",e.jsx(n,{htmlFor:"description",className:"font-medium",children:"Description"}),e.jsx(u,{id:"description",name:"description",value:s.description||"",onChange:d,placeholder:"A short summary of the dish...",className:"min-h-[80px]"})]})]})]}),e.jsx(j,{}),e.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(n,{htmlFor:"ingredients",className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(ie,{size:18})," Ingredients ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Enter each ingredient on a new line."}),e.jsx(u,{id:"ingredients",name:"ingredients",value:s.ingredients.join(`
`),onChange:V,className:"min-h-[200px] text-sm",required:!0,placeholder:`e.g., 1 lb Chicken breast
1 tbsp Olive oil
1 Onion, chopped`})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(n,{htmlFor:"instructions",className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(ne,{size:18})," Instructions ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Enter steps clearly. You can use new lines for steps."}),e.jsx(u,{id:"instructions",name:"instructions",value:s.instructions,onChange:d,className:"min-h-[200px] text-sm",required:!0,placeholder:`e.g., 1. Heat olive oil in a pan...
2. Add chopped onions and cook until softened...
3. Add chicken and brown...`})]})]}),e.jsx(j,{}),e.jsxs("section",{className:"space-y-5",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-200 border-b pb-2 mb-4",children:"Details"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-5",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs(n,{htmlFor:"prepTime",className:"font-medium flex items-center gap-1.5",children:[e.jsx(N,{size:14})," Prep Time"]}),e.jsx(c,{id:"prepTime",name:"prepTime",value:s.prepTime||"",onChange:d,placeholder:"e.g., 15 mins"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs(n,{htmlFor:"cookTime",className:"font-medium flex items-center gap-1.5",children:[e.jsx(N,{size:14})," Cook Time"]}),e.jsx(c,{id:"cookTime",name:"cookTime",value:s.cookTime||"",onChange:d,placeholder:"e.g., 30 mins"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs(n,{htmlFor:"totalTime",className:"font-medium flex items-center gap-1.5",children:[e.jsx(N,{size:14})," Total Time"]}),e.jsx(c,{id:"totalTime",name:"totalTime",value:s.totalTime||"",onChange:d,placeholder:"e.g., 45 mins"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs(n,{htmlFor:"servings",className:"font-medium flex items-center gap-1.5",children:[e.jsx(le,{size:14})," Servings"]}),e.jsx(c,{id:"servings",name:"servings",value:s.servings||"",onChange:d,placeholder:"e.g., 4 servings"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs(n,{htmlFor:"difficulty",className:"font-medium flex items-center gap-1.5",children:[e.jsx(ce,{size:14})," Difficulty"]}),e.jsxs(ee,{name:"difficulty",value:s.difficulty||"",onValueChange:r=>D("difficulty",r),children:[e.jsx(se,{id:"difficulty",children:e.jsx(ae,{placeholder:"Select difficulty"})}),e.jsx(te,{children:[...new Set(ge)].map(r=>e.jsx(re,{value:r,children:r},r))})]})]})]})]}),e.jsx(j,{}),e.jsxs("section",{className:"space-y-5",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-200 border-b pb-2 mb-4 flex items-center gap-2",children:[e.jsx(oe,{size:18})," Estimated Macros ",e.jsx("span",{className:"text-sm font-normal text-gray-500",children:"(per serving)"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-5",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(n,{htmlFor:"calories",className:"font-medium",children:"Calories"}),e.jsx(c,{id:"calories",name:"calories",value:((k=s.macros)==null?void 0:k.calories)||"",onChange:g,placeholder:"e.g., 450 kcal"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(n,{htmlFor:"protein",className:"font-medium",children:"Protein"}),e.jsx(c,{id:"protein",name:"protein",value:((S=s.macros)==null?void 0:S.protein)||"",onChange:g,placeholder:"e.g., 30g"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(n,{htmlFor:"carbs",className:"font-medium",children:"Carbs"}),e.jsx(c,{id:"carbs",name:"carbs",value:((T=s.macros)==null?void 0:T.carbs)||"",onChange:g,placeholder:"e.g., 40g"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(n,{htmlFor:"fat",className:"font-medium",children:"Fat"}),e.jsx(c,{id:"fat",name:"fat",value:((w=s.macros)==null?void 0:w.fat)||"",onChange:g,placeholder:"e.g., 20g"})]})]})]}),e.jsx(j,{}),e.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(n,{htmlFor:"tips",className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(de,{size:18})," Tips & Variations"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Enter each tip on a new line."}),e.jsx(u,{id:"tips",name:"tips",value:(s.tips||[]).join(`
`),onChange:M,className:"min-h-[120px] text-sm",placeholder:`e.g., * Add chili flakes for extra heat
* Serve with a dollop of sour cream or yogurt`})]}),s.reasoning&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs(n,{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(me,{size:18})," AI Chef's Reasoning ",e.jsx("span",{className:"text-xs font-normal text-gray-500",children:"(Read-only)"})]}),e.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300 italic bg-blue-50 dark:bg-blue-950/30 p-4 rounded-md border-l-4 border-blue-400 dark:border-blue-600",children:s.reasoning})]})]}),h&&e.jsxs(R,{variant:"destructive",className:"mt-6",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx(F,{children:"Error"}),e.jsx(I,{children:h})]})]}),e.jsxs(_,{className:"p-5 sm:p-6 border-t dark:border-gray-800 bg-gray-50 dark:bg-gray-900/50 flex justify-end gap-3 sticky bottom-0",children:[" ",e.jsxs(v,{type:"button",variant:"outline",onClick:()=>f("/my-recipes"),className:"flex items-center gap-1.5",children:[e.jsx(he,{className:"h-4 w-4"})," Cancel"]}),e.jsx(v,{type:"submit",disabled:b,className:O("bg-recipe-primary hover:bg-recipe-secondary text-white dark:bg-recipe-accent dark:hover:bg-recipe-primary dark:text-black","flex items-center gap-1.5 min-w-[120px]"),children:b?e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"h-4 w-4 animate-spin"})," Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"h-4 w-4"})," Save Changes"]})})]})]})]})]})};export{Re as default};
