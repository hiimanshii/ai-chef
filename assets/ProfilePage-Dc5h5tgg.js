import{c as Pe,r as o,j as e,b as se,P as j,n as Le,K as R,h as k,u as Ae,T as Ee,i as Ie,k as Te,B as E,U as H,V as $e,W as Me,C as Re,Y as Fe}from"./index-C0Eqig3U.js";import{C as S,a as b,c as I,b as T,d as $,e as B}from"./card-XD_VQd1P.js";import{I as K}from"./input-Dl9dDyYd.js";import{L as g}from"./label-CpBi_1et.js";import{T as Ve,a as _e,b as Y,d as q,C as Ue}from"./tabs-BwfXL7wF.js";import{S as De}from"./separator-DyRVbhgN.js";import{S as p}from"./skeleton-Nih0iADS.js";import{S as z,a as W,b as X,c as J,d as Q}from"./select-ByOXG2w2.js";import{S as Oe}from"./settings-B8sAYnuk.js";import{S as Ge}from"./save-D6v2UtVk.js";import"./Combination-CblnsaFj.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=Pe("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);var re={exports:{}},te={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v=o;function Be(a,s){return a===s&&(a!==0||1/a===1/s)||a!==a&&s!==s}var Ke=typeof Object.is=="function"?Object.is:Be,Ye=v.useState,qe=v.useEffect,ze=v.useLayoutEffect,We=v.useDebugValue;function Xe(a,s){var r=s(),n=Ye({inst:{value:r,getSnapshot:s}}),t=n[0].inst,l=n[1];return ze(function(){t.value=r,t.getSnapshot=s,M(t)&&l({inst:t})},[a,r,s]),qe(function(){return M(t)&&l({inst:t}),a(function(){M(t)&&l({inst:t})})},[a]),We(r),r}function M(a){var s=a.getSnapshot;a=a.value;try{var r=s();return!Ke(a,r)}catch{return!0}}function Je(a,s){return s()}var Qe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Je:Xe;te.useSyncExternalStore=v.useSyncExternalStore!==void 0?v.useSyncExternalStore:Qe;re.exports=te;var Ze=re.exports;function ea(){return Ze.useSyncExternalStore(aa,()=>!0,()=>!1)}function aa(){return()=>{}}var F="Avatar",[sa,Ca]=se(F),[ra,ne]=sa(F),le=o.forwardRef((a,s)=>{const{__scopeAvatar:r,...n}=a,[t,l]=o.useState("idle");return e.jsx(ra,{scope:r,imageLoadingStatus:t,onImageLoadingStatusChange:l,children:e.jsx(j.span,{...n,ref:s})})});le.displayName=F;var ie="AvatarImage",oe=o.forwardRef((a,s)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:t=()=>{},...l}=a,f=ne(ie,r),c=ta(n,l),d=Le(u=>{t(u),f.onImageLoadingStatusChange(u)});return R(()=>{c!=="idle"&&d(c)},[c,d]),c==="loaded"?e.jsx(j.img,{...l,ref:s,src:n}):null});oe.displayName=ie;var ce="AvatarFallback",de=o.forwardRef((a,s)=>{const{__scopeAvatar:r,delayMs:n,...t}=a,l=ne(ce,r),[f,c]=o.useState(n===void 0);return o.useEffect(()=>{if(n!==void 0){const d=window.setTimeout(()=>c(!0),n);return()=>window.clearTimeout(d)}},[n]),f&&l.imageLoadingStatus!=="loaded"?e.jsx(j.span,{...t,ref:s}):null});de.displayName=ce;function Z(a,s){return a?s?(a.src!==s&&(a.src=s),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function ta(a,{referrerPolicy:s,crossOrigin:r}){const n=ea(),t=o.useRef(null),l=n?(t.current||(t.current=new window.Image),t.current):null,[f,c]=o.useState(()=>Z(l,a));return R(()=>{c(Z(l,a))},[l,a]),R(()=>{const d=h=>()=>{c(h)};if(!l)return;const u=d("loaded"),x=d("error");return l.addEventListener("load",u),l.addEventListener("error",x),s&&(l.referrerPolicy=s),typeof r=="string"&&(l.crossOrigin=r),()=>{l.removeEventListener("load",u),l.removeEventListener("error",x)}},[l,r,s]),f}var ue=le,me=oe,fe=de;const xe=o.forwardRef(({className:a,...s},r)=>e.jsx(ue,{ref:r,className:k("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...s}));xe.displayName=ue.displayName;const he=o.forwardRef(({className:a,...s},r)=>e.jsx(me,{ref:r,className:k("aspect-square h-full w-full",a),...s}));he.displayName=me.displayName;const pe=o.forwardRef(({className:a,...s},r)=>e.jsx(fe,{ref:r,className:k("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...s}));pe.displayName=fe.displayName;var V="Progress",_=100,[na,Pa]=se(V),[la,ia]=na(V),ve=o.forwardRef((a,s)=>{const{__scopeProgress:r,value:n=null,max:t,getValueLabel:l=oa,...f}=a;(t||t===0)&&!ee(t)&&console.error(ca(`${t}`,"Progress"));const c=ee(t)?t:_;n!==null&&!ae(n,c)&&console.error(da(`${n}`,"Progress"));const d=ae(n,c)?n:null,u=w(d)?l(d,c):void 0;return e.jsx(la,{scope:r,value:d,max:c,children:e.jsx(j.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":w(d)?d:void 0,"aria-valuetext":u,role:"progressbar","data-state":ye(d,c),"data-value":d??void 0,"data-max":c,...f,ref:s})})});ve.displayName=V;var ge="ProgressIndicator",je=o.forwardRef((a,s)=>{const{__scopeProgress:r,...n}=a,t=ia(ge,r);return e.jsx(j.div,{"data-state":ye(t.value,t.max),"data-value":t.value??void 0,"data-max":t.max,...n,ref:s})});je.displayName=ge;function oa(a,s){return`${Math.round(a/s*100)}%`}function ye(a,s){return a==null?"indeterminate":a===s?"complete":"loading"}function w(a){return typeof a=="number"}function ee(a){return w(a)&&!isNaN(a)&&a>0}function ae(a,s){return w(a)&&!isNaN(a)&&a<=s&&a>=0}function ca(a,s){return`Invalid prop \`max\` of value \`${a}\` supplied to \`${s}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${_}\`.`}function da(a,s){return`Invalid prop \`value\` of value \`${a}\` supplied to \`${s}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${_} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Ne=ve,ua=je;const Se=o.forwardRef(({className:a,value:s,...r},n)=>e.jsx(Ne,{ref:n,className:k("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...r,children:e.jsx(ua,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));Se.displayName=Ne.displayName;const ma=["Italian","Mexican","Chinese","Indian","Japanese","Thai","French","Mediterranean","American","Middle Eastern","Korean","Vietnamese","Greek","Spanish"],fa=[{id:"vegan",label:"Vegan"},{id:"vegetarian",label:"Vegetarian"},{id:"gluten-free",label:"Gluten-Free"},{id:"dairy-free",label:"Dairy-Free"},{id:"keto",label:"Keto"},{id:"paleo",label:"Paleo"},{id:"low-carb",label:"Low-Carb"}],xa=["Beginner","Intermediate","Advanced","Any"],La=()=>{const{currentUser:a}=Ae(),{theme:s,toggleTheme:r}=Ee(),{toast:n}=Ie(),[t,l]=o.useState(!0),[f,c]=o.useState(!1),[d,u]=o.useState(0),[x,h]=o.useState(""),[U,D]=o.useState(""),[O,C]=o.useState([]),[P,L]=o.useState(""),[G,A]=o.useState(""),[be,we]=o.useState("profile");o.useEffect(()=>{let i=!0;return a?(D(a.email||""),Te().then(m=>{var y;if(i&&m){h(m.displayName||a.name||"User"),C(m.dietaryPreferences||[]),L(((y=m.cuisinePreferences)==null?void 0:y[0])||""),A(m.skillLevel||"Any");const N=m.darkMode===!0;s!==(N?"dark":"light")&&(N&&s==="light"||!N&&s==="dark")&&(r(),console.log(`Theme toggled based on profile setting (darkMode: ${N})`)),l(!1)}else i&&(h(a.name||"User"),C([]),L(""),A("Any"),console.warn("Profile document not found or error fetching. Using defaults."),l(!1))}).catch(m=>{console.error("Error loading user profile:",m),i&&(n({title:"Failed to load profile",description:"There was a problem loading your profile data.",variant:"destructive"}),h(a.name||"User"),D(a.email||""),l(!1))})):l(!1),()=>{i=!1}},[a,n,s,r]);const ke=i=>{C(m=>m.includes(i)?m.filter(y=>y!==i):[...m,i])},Ce=async()=>{if(a){c(!0),u(25);try{u(50);const i={dietaryPreferences:O,cuisinePreferences:P?[P]:[],skillLevel:G,darkMode:s==="dark"};u(75),await Fe(i),u(100),n({title:"Preferences saved",description:"Your cooking preferences have been updated successfully."})}catch(i){console.error("Error saving profile preferences:",i),n({title:"Save failed",description:"There was a problem saving your preferences.",variant:"destructive"}),u(0)}finally{setTimeout(()=>{c(!1),u(0)},500)}}};return t?e.jsx("div",{className:"container max-w-4xl mx-auto py-10 px-4",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(p,{className:"h-12 w-[200px] mb-6"}),e.jsx("div",{className:"grid gap-6",children:e.jsxs(S,{children:[e.jsxs(b,{children:[e.jsx(p,{className:"h-8 w-[150px]"}),e.jsx(p,{className:"h-4 w-[250px]"})]}),e.jsx(I,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(p,{className:"h-8 w-full"}),e.jsx(p,{className:"h-8 w-full"}),e.jsx(p,{className:"h-8 w-full"})]})})]})})]})}):a?e.jsxs("div",{className:"container max-w-4xl mx-auto py-10 px-4",children:[e.jsxs("h1",{className:"text-3xl font-bold mb-6 flex items-center gap-2",children:[e.jsx(H,{className:"h-8 w-8 text-recipe-primary dark:text-recipe-accent"}),"User Profile"]}),e.jsxs(Ve,{value:be,onValueChange:we,className:"w-full",children:[e.jsxs(_e,{className:"grid w-full grid-cols-2 mb-8",children:[e.jsxs(Y,{value:"profile",className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{children:"Profile"})]}),e.jsxs(Y,{value:"preferences",className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-4 w-4"}),e.jsx("span",{children:"Cooking Preferences"})]})]}),e.jsx(q,{value:"profile",className:"space-y-6",children:e.jsxs(S,{children:[e.jsxs(b,{children:[e.jsx(T,{children:"Profile Information"}),e.jsx($,{children:"Your personal information and account details."})]}),e.jsxs(I,{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 items-start sm:items-center",children:[e.jsxs(xe,{className:"h-24 w-24 border-2 border-gray-200 dark:border-gray-700",children:[e.jsx(he,{src:""}),e.jsx(pe,{className:"text-2xl bg-recipe-primary text-white dark:bg-recipe-accent",children:x?x.charAt(0).toUpperCase():"?"})]}),e.jsxs("div",{className:"space-y-1 flex-1",children:[e.jsx("h3",{className:"font-medium text-xl",children:x}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:U}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Member since: ",new Date(a.$createdAt).toLocaleDateString()]})]}),e.jsx(E,{variant:"outline",size:"icon",onClick:r,"aria-label":`Switch to ${s==="light"?"dark":"light"} mode`,children:s==="light"?e.jsx($e,{className:"h-5 w-5"}):e.jsx(Me,{className:"h-5 w-5"})})]}),e.jsx(De,{}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(g,{htmlFor:"name",children:"Name"}),e.jsx(K,{id:"name",value:x,onChange:i=>h(i.target.value),disabled:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(g,{htmlFor:"email",children:"Email"}),e.jsx(K,{id:"email",type:"email",value:U,disabled:!0})]})]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.jsx("p",{children:"To update your email or password, please contact support."})})]})]})}),e.jsx(q,{value:"preferences",className:"space-y-6",children:e.jsxs(S,{children:[e.jsxs(b,{children:[e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"h-5 w-5 text-recipe-primary dark:text-recipe-accent"}),"Cooking Preferences"]}),e.jsx($,{children:"Set your cooking preferences to personalize your recipe recommendations. These settings will be auto-filled when you generate new recipes."})]}),e.jsx(I,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-medium text-base mb-2 flex items-center gap-2",children:[e.jsx(He,{className:"h-4 w-4 text-recipe-secondary dark:text-recipe-accent"}),"Dietary Preferences"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:fa.map(i=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{id:`dietary-${i.id}`,checked:O.includes(i.id),onCheckedChange:()=>ke(i.id)}),e.jsx(g,{htmlFor:`dietary-${i.id}`,className:"text-sm",children:i.label})]},i.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"cuisine",className:"font-medium",children:"Favorite Cuisine"}),e.jsxs(z,{value:P,onValueChange:L,children:[e.jsx(W,{id:"cuisine",children:e.jsx(X,{placeholder:"No preference / Select cuisine"})}),e.jsx(J,{children:ma.map(i=>e.jsx(Q,{value:i,children:i},i))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"skill-level",className:"font-medium",children:"Cooking Skill Level"}),e.jsxs(z,{value:G,onValueChange:A,children:[e.jsx(W,{id:"skill-level",children:e.jsx(X,{placeholder:"Select skill level"})}),e.jsx(J,{children:xa.map(i=>e.jsx(Q,{value:i,children:i},i))})]})]})]})]})}),e.jsxs(B,{className:"flex flex-col items-end",children:[" ",f&&e.jsxs("div",{className:"w-full mb-4",children:[e.jsx(Se,{value:d,className:"h-2"}),e.jsx("p",{className:"text-xs text-center text-gray-500 mt-1",children:"Saving..."})]}),e.jsx(E,{onClick:Ce,disabled:f,className:"w-full sm:w-auto",children:f?"Saving...":e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"mr-2 h-4 w-4"}),"Save Preferences"]})})]})]})})]})]}):e.jsx("div",{className:"container max-w-4xl mx-auto py-10 px-4",children:e.jsxs(S,{children:[e.jsxs(b,{children:[e.jsx(T,{children:"Profile"}),e.jsx($,{children:"You need to be logged in to view your profile."})]}),e.jsx(B,{children:e.jsx(E,{asChild:!0,children:e.jsx("a",{href:"/login",children:"Login"})})})]})})};export{La as default};
